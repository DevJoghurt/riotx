define(function(){"use strict";var e="2.0.0";function t(e,t,r){if(e==null){return}var n=-1,i=e.length;while(++n<i){if(t.call(r,e[n],n,e)===false){break}}}var r=t;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=n;var a;var o;function s(){o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];a=true;for(var e in{toString:null}){a=false}}function u(e,t,r){var n,u=0;if(a==null){s()}for(n in e){if(f(t,e,n,r)===false){break}}if(a){var l=e.constructor,c=!!l&&e===l.prototype;while(n=o[u++]){if((n!=="constructor"||!c&&i(e,n))&&e[n]!==Object.prototype[n]){if(f(t,e,n,r)===false){break}}}}}function f(e,t,r,n){return e.call(n,t[r],r,t)}var l=u;function c(e,t,r){l(e,function(n,a){if(i(e,a)){return t.call(r,e[a],a,e)}})}var p=c;var v=Object.keys||function(e){var t=[];p(e,function(e,r){t.push(r)});return t};var h=v;function d(e){return Object.prototype.toString.call(e).slice(8,-1)}var g=d;function m(e,t){return g(e)===t}var y=m;function _(e){return y(e,"Function")}var w=_;function b(e){return y(e,"Object")}var x=b;var N=setTimeout;function O(){}function j(e,t){return function(){e.apply(t,arguments)}}function T(e){if(!(this instanceof T)){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];S(e,this)}function C(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;T._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?E:k)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(e){k(t.promise,e);return}E(t.promise,n)})}function E(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var r=t.then;if(t instanceof T){e._state=3;e._value=t;A(e);return}else if(typeof r==="function"){S(j(r,t),e);return}}e._state=1;e._value=t;A(e)}catch(t){k(e,t)}}function k(e,t){e._state=2;e._value=t;A(e)}function A(e){if(e._state===2&&e._deferreds.length===0){T._immediateFn(function(){if(!e._handled){T._unhandledRejectionFn(e._value)}})}for(var t=0,r=e._deferreds.length;t<r;t++){C(e,e._deferreds[t])}e._deferreds=null}function L(e,t,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=r}function S(e,t){var r=false;try{e(function(e){if(r){return}r=true;E(t,e)},function(e){if(r){return}r=true;k(t,e)})}catch(e){if(r){return}r=true;k(t,e)}}T.prototype["catch"]=function(e){return this.then(null,e)};T.prototype.then=function(e,t){var r=new this.constructor(O);C(this,new L(e,t,r));return r};T.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})};T.all=function(e){return new T(function(t,r){if(!e||typeof e.length==="undefined"){throw new TypeError("Promise.all accepts an array")}var n=Array.prototype.slice.call(e);if(n.length===0){return t([])}var i=n.length;function a(e,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(t){a(e,t)},r);return}}n[e]=o;if(--i===0){t(n)}}catch(e){r(e)}}for(var o=0;o<n.length;o++){a(o,n[o])}})};T.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===T){return e}return new T(function(t){t(e)})};T.reject=function(e){return new T(function(t,r){r(e)})};T.race=function(e){return new T(function(t,r){for(var n=0,i=e.length;n<i;n++){e[n].then(t,r)}})};T._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){N(e,0)};T._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};var R=[];var P={};var I="yield";var M="__global_mixin";var B="riot-";var $=["ref","data-ref"];var F="data-is";var U="if";var V="each";var H="no-reorder";var z="show";var D="hide";var K="key";var q="__riot-events__";var G="string";var W="object";var Z="undefined";var Q="function";var J="http://www.w3.org/1999/xlink";var X="http://www.w3.org/2000/svg";var Y=/^xlink:(\w+)/;var ee=typeof window===Z?undefined:window;var te=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var re=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var ne=/^on/;var ie=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var ae={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"};var oe=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var se=(ee&&ee.document||{}).documentMode|0;function ue(e,t){return[].slice.call((t||document).querySelectorAll(e))}function fe(e,t){return(t||document).querySelector(e)}function le(){return document.createDocumentFragment()}function ce(){return document.createTextNode("")}function pe(e){var t=e.ownerSVGElement;return!!t||t===null}function ve(e){return e==="svg"?document.createElementNS(X,e):document.createElement(e)}function he(e,t,r){if(r){var n=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+X+'">'+t+"</svg>","application/xml").documentElement,true);e.appendChild(n)}else{e.innerHTML=t}}function de(e,t){e.style.display=t?"":"none";e.hidden=t?false:true}function ge(e,t){e.removeAttribute(t)}function me(e){return Object.keys(e).reduce(function(t,r){return t+" "+r+": "+e[r]+";"},"")}function ye(e,t){return e.getAttribute(t)}function _e(e,t,r){var n=Y.exec(t);if(n&&n[1]){e.setAttributeNS(J,n[1],r)}else{e.setAttribute(t,r)}}function we(e,t,r){e.insertBefore(t,r.parentNode&&r)}function be(e,t){if(!e){return}var r;while(r=ie.exec(e)){t(r[1].toLowerCase(),r[2]||r[3]||r[4])}}function xe(e,t,r){if(e){var n=t(e,r);var i;if(n===false){return}e=e.firstChild;while(e){i=e.nextSibling;xe(e,t,n);e=i}}}var Ne=Object.freeze({$$:ue,$:fe,createFrag:le,createDOMPlaceholder:ce,isSvg:pe,mkEl:ve,setInnerHTML:he,toggleVisibility:de,remAttr:ge,styleObjectToString:me,getAttr:ye,setAttr:_e,safeInsert:we,walkAttrs:be,walkNodes:xe});var Oe;var je;var Te={};var Ce=[];var Ee=false;if(ee){Oe=function(){var e=ve("style");var t=fe("style[type=riot]");_e(e,"type","text/css");if(t){if(t.id){e.id=t.id}t.parentNode.replaceChild(e,t)}else{document.head.appendChild(e)}return e}();je=Oe.styleSheet}var ke={styleNode:Oe,add:function e(t,r){if(r){Te[r]=t}else{Ce.push(t)}Ee=true},inject:function e(){if(!ee||!Ee){return}Ee=false;var t=Object.keys(Te).map(function(e){return Te[e]}).concat(Ce).join("\n");if(je){je.cssText=t}else{Oe.innerHTML=t}}};var Ae=function(){var e="[{(,;:?=|&!^~>%*/";var t=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"];var r=t.reduce(function(e,t){return e+t.slice(-1)},"");var n=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/;var i=/[$\w]/;function a(e,t){while(--t>=0&&/\s/.test(e[t])){}return t}function o(o,s){var u=/.*/g;var f=u.lastIndex=s++;var l=u.exec(o)[0].match(n);if(l){var c=f+l[0].length;f=a(o,f);var p=o[f];if(f<0||~e.indexOf(p)){return c}if(p==="."){if(o[f-1]==="."){s=c}}else if(p==="+"||p==="-"){if(o[--f]!==p||(f=a(o,f))<0||!i.test(o[f])){s=c}}else if(~r.indexOf(p)){var v=f+1;while(--f>=0&&i.test(o[f])){}if(~t.indexOf(o.slice(f+1,v))){s=c}}}return s}return o}();var Le=function(e){var t="g",r=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,n=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,i=n.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\"+"x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=n.source+"|"+/(\/)(?![*\/])/.source,u={"(":RegExp("([()])|"+s,t),"[":RegExp("([[\\]])|"+s,t),"{":RegExp("([{}])|"+s,t)},f="{ }";var l=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,t),f,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var c=e,p,v=[],h;function d(e){return e}function g(e,r){if(!r){r=v}return new RegExp(e.source.replace(/{/g,r[2]).replace(/}/g,r[3]),e.global?t:"")}function m(e){if(e===f){return l}var r=e.split(" ");if(r.length!==2||a.test(e)){throw new Error('Unsupported brackets "'+e+'"')}r=r.concat(e.replace(o,"\\").split(" "));r[4]=g(r[1].length>1?/{[\S\s]*?}/:l[4],r);r[5]=g(e.length>3?/\\({|})/g:l[5],r);r[6]=g(l[6],r);r[7]=RegExp("\\\\("+r[3]+")|([[({])|("+r[3]+")|"+s,t);r[8]=e;return r}function y(e){return e instanceof RegExp?p(e):v[e]}y.split=function e(t,r,n){if(!n){n=v}var i=[],a,o,s,f,l=n[6];var c=[];var p="";var h,d;o=s=l.lastIndex=0;while(a=l.exec(t)){d=l.lastIndex;f=a.index;if(o){if(a[2]){var g=a[2];var m=u[g];var y=1;m.lastIndex=d;while(a=m.exec(t)){if(a[1]){if(a[1]===g){++y}else if(!--y){break}}else{m.lastIndex=w(a.index,m.lastIndex,a[2])}}l.lastIndex=y?t.length:m.lastIndex;continue}if(!a[3]){l.lastIndex=w(f,d,a[4]);continue}}if(!a[1]){_(t.slice(s,f));s=l.lastIndex;l=n[6+(o^=1)];l.lastIndex=s}}if(t&&s<t.length){_(t.slice(s))}i.qblocks=c;return i;function _(e){if(p){e=p+e;p=""}if(r||o){i.push(e&&e.replace(n[5],"$1"))}else{i.push(e)}}function w(e,n,i){if(i){n=Ae(t,e)}if(r&&n>e+2){h="‚Åó"+c.length+"~";c.push(t.slice(e,n));p+=t.slice(s,e)+h;s=n}return n}};y.hasExpr=function e(t){return v[4].test(t)};y.loopKeys=function e(t){var r=t.match(v[9]);return r?{key:r[1],pos:r[2],val:v[0]+r[3].trim()+v[1]}:{val:t.trim()}};y.array=function e(t){return t?m(t):v};function _(e){if((e||(e=f))!==v[8]){v=m(e);p=e===f?d:g;v[9]=p(l[9])}c=e}function w(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:_,get:function(){return c},enumerable:true});h=e;_(t)}Object.defineProperty(y,"settings",{set:w,get:function(){return h}});y.settings=typeof riot!=="undefined"&&riot.settings||{};y.set=_;y.skipRegex=Ae;y.R_STRINGS=n;y.R_MLCOMMS=r;y.S_QBLOCKS=i;y.S_QBLOCK2=s;return y}();var Se=function(){var e={};function t(t,i){if(!t){return t}return(e[t]||(e[t]=n(t))).call(i,r.bind({data:i,tmpl:t}))}t.hasExpr=Le.hasExpr;t.loopKeys=Le.loopKeys;t.clearCache=function(){e={}};t.errorHandler=null;function r(e,r){e.riotData={tagName:r&&r.__&&r.__.tagName,_riot_id:r&&r._riot_id};if(t.errorHandler){t.errorHandler(e)}else if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e.message);console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl);console.log(this.data)}}function n(e){var t=o(e);if(t.slice(0,11)!=="try{return "){t="return "+t}return new Function("E",t+";")}var i=/\u2057/g;var a=/\u2057(\d+)~/g;function o(e){var t=Le.split(e.replace(i,'"'),1);var r=t.qblocks;var n;if(t.length>2||t[0]){var o,s,u=[];for(o=s=0;o<t.length;++o){n=t[o];if(n&&(n=o&1?f(n,1,r):'"'+n.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')){u[s++]=n}}n=s<2?u[0]:"["+u.join(",")+'].join("")'}else{n=f(t[1],0,r)}if(r.length){n=n.replace(a,function(e,t){return r[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})}return n}var s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/;var u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function f(e,t,r){e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var n=[],i=0,a;while(e&&(a=e.match(s))&&!a.index){var o,f,l=/,|([[{(])|$/g;e=RegExp.rightContext;o=a[2]?r[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(f=(a=l.exec(e))[1]){c(f,l)}f=e.slice(0,a.index);e=RegExp.rightContext;n[i++]=v(f,1,o)}e=!i?v(e,t):i>1?"["+n.join(",")+'].join(" ").trim()':n[0]}return e;function c(t,r){var n,i=1,a=u[t];a.lastIndex=r.lastIndex;while(n=a.exec(e)){if(n[0]===t){++i}else if(!--i){break}}r.lastIndex=i?e.length:a.lastIndex}}var l='"in this?this:'+(typeof window!=="object"?"global":"window")+").",c=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,p=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function v(e,t,r){var n;e=e.replace(c,function(e,t,r,i,a){if(r){i=n?0:i+e.length;if(r!=="this"&&r!=="global"&&r!=="window"){e=t+'("'+r+l+r;if(i){n=(a=a[i])==="."||a==="("||a==="["}}else if(i){n=!p.test(a.slice(i))}}return e});if(n){e="try{return "+e+"}catch(e){E(e,this)}"}if(r){e=(n?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+r+'":""'}else if(t){e="function(v){"+(n?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}t.version=Le.version="v3.0.8";return t}();var Re=function(e){e=e||{};var t={},r=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(r,n){if(typeof n=="function"){(t[r]=t[r]||[]).push(n)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(r,n){if(r=="*"&&!n){t={}}else{if(n){var i=t[r];for(var a=0,o;o=i&&i[a];++a){if(o==n){i.splice(a--,1)}}}else{delete t[r]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,r){function n(){e.off(t,n);r.apply(e,arguments)}return e.on(t,n)},enumerable:false,writable:false,configurable:false},trigger:{value:function(n){var i=arguments;var a=arguments.length-1,o=new Array(a),s,u,f;for(f=0;f<a;f++){o[f]=i[f+1]}s=r.call(t[n]||[],0);for(f=0;u=s[f];++f){u.apply(e,o)}if(t["*"]&&n!="*"){e.trigger.apply(e,["*",n].concat(o))}return e},enumerable:false,writable:false,configurable:false}});return e};function Pe(e){return oe.test(e)}function Ie(e){return typeof e===Q}function Me(e){return e&&typeof e===W}function Be(e){return typeof e===Z}function $e(e){return typeof e===G}function Fe(e){return Ue(e)||e===""}function Ue(e){return Be(e)||e===null}function Ve(e){return Array.isArray(e)||e instanceof Array}function He(e,t){var r=Je(e,t);return Be(e[t])||r&&r.writable}var ze=Object.freeze({isBoolAttr:Pe,isFunction:Ie,isObject:Me,isUndefined:Be,isString:$e,isBlank:Fe,isNil:Ue,isArray:Ve,isWritable:He});function De(e,t){var r=e?e.length:0;var n=0;for(;n<r;n++){t(e[n],n)}return e}function Ke(e,t){return e.indexOf(t)!==-1}function qe(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function Ge(e,t){return e.slice(0,t.length)===t}function We(e,t,r,n){Object.defineProperty(e,t,Xe({value:r,enumerable:false,writable:false,configurable:true},n));return e}var Ze=function(){var e=-1;return function(){return++e}}();function Qe(e){if(console&&console.warn){console.warn(e)}}var Je=function(e,t){return Object.getOwnPropertyDescriptor(e,t)};function Xe(e){var t;var r=1;var n=arguments;var i=n.length;for(;r<i;r++){if(t=n[r]){for(var a in t){if(He(e,a)){e[a]=t[a]}}}}return e}var Ye=Object.freeze({each:De,contains:Ke,toCamel:qe,startsWith:Ge,defineProperty:We,uid:Ze,warn:Qe,getPropDescriptor:Je,extend:Xe});var et=Xe(Object.create(Le.settings),{skipAnonymousTags:true,autoUpdate:true});function tt(e,t,r){var n=this.__.parent;var i=this.__.item;if(!i){while(n&&!i){i=n.__.item;n=n.__.parent}}if(He(r,"currentTarget")){r.currentTarget=e}if(He(r,"target")){r.target=r.srcElement}if(He(r,"which")){r.which=r.charCode||r.keyCode}r.item=i;t.call(this,r);if(!et.autoUpdate){return}if(!r.preventUpdate){var a=Zt(this);if(a.isMounted){a.update()}}}function rt(e,t,r,n){var i;var a=tt.bind(n,r,t);r[e]=null;i=e.replace(ne,"");if(!Ke(n.__.listeners,r)){n.__.listeners.push(r)}if(!r[q]){r[q]={}}if(r[q][e]){r.removeEventListener(i,r[q][e])}r[q][e]=a;r.addEventListener(i,a,false)}function nt(e,t,r){var n=e.tag||e.dom._tag;var i;var a=n?n.__:{};var o=a.head;var s=e.dom.tagName==="VIRTUAL";if(n&&e.tagName===r){n.update();return}if(n){if(s){i=ce();o.parentNode.insertBefore(i,o)}n.unmount(true)}if(!$e(r)){return}e.impl=P[r];if(!e.impl){return}e.tag=n=Wt(e.impl,{root:e.dom,parent:t,tagName:r},e.dom.innerHTML,t);De(e.attrs,function(e){return _e(n.root,e.name,e.value)});e.tagName=r;n.mount();if(s){tr(n,i||n.root)}t.__.onUnmount=function(){var e=n.opts.dataIs;Yt(n.parent.tags,e,n);Yt(n.__.parent.tags,e,n);n.unmount()}}function it(e){if(!e){return null}e=e.replace(B,"");if(ae[e]){e=ae[e]}return e}function at(e){if(this.root&&ye(this.root,"virtualized")){return}var t=e.dom;var r=it(e.attr);var n=Ke([z,D],r);var i=e.root&&e.root.tagName==="VIRTUAL";var a=this.__;var o=a.isAnonymous;var s=t&&(e.parent||t.parentNode);var u=r==="style";var f=r==="class";var l;if(e._riot_id){if(e.__.wasCreated){e.update()}else{e.mount();if(i){tr(e,e.root)}}return}if(e.update){return e.update()}var c=n&&!o?nr.call(this):this;l=Se(e.expr,c);var p=!Fe(l);var v=Me(l);if(v){if(f){l=Se(JSON.stringify(l),this)}else if(u){l=me(l)}}if(e.attr&&(!e.wasParsedOnce||!p||l===false)){ge(t,ye(t,e.attr)?e.attr:r)}if(e.bool){l=l?r:false}if(e.isRtag){return nt(e,this,l)}if(e.wasParsedOnce&&e.value===l){return}e.value=l;e.wasParsedOnce=true;if(v&&!f&&!u&&!n){return}if(!p){l=""}if(!r){l+="";if(s){e.parent=s;if(s.tagName==="TEXTAREA"){s.value=l;if(!se){t.nodeValue=l}}else{t.nodeValue=l}}return}if(Ie(l)){rt(r,l,t,this)}else if(n){de(t,r===D?!l:l)}else{if(e.bool){t[r]=l}if(r==="value"&&t.value!==l){t.value=l}else if(p&&l!==false){_e(t,r,l)}if(u&&t.hidden){de(t,false)}}}function ot(e){De(e,at.bind(this))}var st={init:function e(t,r,n){ge(t,U);this.tag=r;this.expr=n;this.stub=ce();this.pristine=t;var i=t.parentNode;i.insertBefore(this.stub,t);i.removeChild(t);return this},update:function e(){this.value=Se(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=yt.apply(this.tag,[this.current,true])}else if(!this.value&&this.current){Qt(this.expressions);if(this.current._tag){this.current._tag.unmount()}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current)}this.current=null;this.expressions=[]}if(this.value){ot.call(this.tag,this.expressions)}},unmount:function e(){Qt(this.expressions||[])}};var ut={init:function e(t,r,n,i){this.dom=t;this.attr=n;this.rawValue=i;this.parent=r;this.hasExp=Se.hasExpr(i);return this},update:function e(){var t=this.value;var r=this.parent&&Zt(this.parent);var n=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?Se(this.rawValue,this.parent):this.rawValue;if(!Fe(t)&&r){Yt(r.refs,t,n)}if(!Fe(this.value)&&$e(this.value)){if(r){Xt(r.refs,this.value,n,null,this.parent.__.index)}if(this.value!==t){_e(this.dom,this.attr,this.value)}}else{ge(this.dom,this.attr)}if(!this.dom.__ref){this.dom.__ref=n}},unmount:function e(){var t=this.tag||this.dom;var r=this.parent&&Zt(this.parent);if(!Fe(this.value)&&r){Yt(r.refs,this.value,t)}}};function ft(e,t,r,n){var i=n?Object.create(n):{};i[e.key]=t;if(e.pos){i[e.pos]=r}return i}function lt(e,t){var r=t.length;var n=e.length;while(r>n){r--;ct.apply(t[r],[t,r])}}function ct(e,t){e.splice(t,1);this.unmount();Yt(this.parent,this,this.__.tagName,true)}function pt(e){var t=this;De(Object.keys(this.tags),function(r){Gt.apply(t.tags[r],[r,e])})}function vt(e,t,r){if(r){ir.apply(this,[e,t])}else{we(e,this.root,t.root)}}function ht(e,t,r){if(r){rr.apply(this,[e,t])}else{we(e,this.root,t.root)}}function dt(e,t){if(t){rr.call(this,e)}else{e.appendChild(this.root)}}function gt(e,t,r,n){if(e){return n?Se(e,r):t[e]}return t}function mt(e,t,r){var n=typeof ye(e,H)!==G||ge(e,H);var i=ye(e,K);var a=i?Se.hasExpr(i):false;var o=Jt(e);var s=P[o];var u=e.parentNode;var f=ce();var l=qt(e);var c=ye(e,U);var p=[];var v=true;var h=e.innerHTML;var d=!P[o];var g=e.tagName==="VIRTUAL";var m=[];var y;ge(e,V);ge(e,K);r=Se.loopKeys(r);r.isLoop=true;if(c){ge(e,U)}u.insertBefore(f,e);u.removeChild(e);r.update=function u(){r.value=Se(r.val,t);var _=r.value;var w=le();var b=!Ve(_)&&!$e(_);var x=f.parentNode;var N=[];if(!x){return}if(b){y=_||false;_=y?Object.keys(_).map(function(e){return ft(r,_[e],e)}):[]}else{y=false}if(c){_=_.filter(function(e,n){if(r.key&&!b){return!!Se(c,ft(r,e,n,t))}return!!Se(c,Xe(Object.create(t),e))})}De(_,function(u,f){var c=!y&&r.key?ft(r,u,f):u;var b=gt(i,u,c,a);var O=n&&typeof u===W&&!y;var j=m.indexOf(b);var T=j===-1;var C=!T&&O?j:f;var E=p[C];var k=f>=m.length;var A=O&&T||!O&&!E;if(A){E=Kt(s,{parent:t,isLoop:v,isAnonymous:d,tagName:o,root:e.cloneNode(d),item:c,index:f},h);E.mount();if(k){dt.apply(E,[w||x,g])}else{ht.apply(E,[x,p[f],g])}if(!k){m.splice(f,0,c)}p.splice(f,0,E);if(l){Xt(t.tags,o,E,true)}}else if(C!==f&&O){if(i||Ke(_,m[C])){vt.apply(E,[x,p[f],g]);p.splice(f,0,p.splice(C,1)[0]);m.splice(f,0,m.splice(C,1)[0])}if(r.pos){E[r.pos]=f}if(!l&&E.tags){pt.call(E,f)}}E.__.item=c;E.__.index=f;E.__.parent=t;N[f]=b;if(!A){E.update(c)}});lt(_,p);m=N.slice();x.insertBefore(w,f)};r.unmount=function(){De(p,function(e){e.unmount()})};return r}function yt(e,t){var r=this;var n=[];xe(e,function(i){var a=i.nodeType;var o;var s;if(!t&&i===e){return}if(a===3&&i.parentNode.tagName!=="STYLE"&&Se.hasExpr(i.nodeValue)){n.push({dom:i,expr:i.nodeValue})}if(a!==1){return}var u=i.tagName==="VIRTUAL";if(o=ye(i,V)){if(u){_e(i,"loopVirtual",true)}n.push(mt(i,r,o));return false}if(o=ye(i,U)){n.push(Object.create(st).init(i,r,o));return false}if(o=ye(i,F)){if(Se.hasExpr(o)){n.push({isRtag:true,expr:o,dom:i,attrs:[].slice.call(i.attributes)});return false}}s=qt(i);if(u){if(ye(i,"virtualized")){i.parentElement.removeChild(i)}if(!s&&!ye(i,"virtualized")&&!ye(i,"loopVirtual")){s={tmpl:i.outerHTML}}}if(s&&(i!==e||t)){if(u){if(ye(i,F)){Qe("Virtual tags shouldn't be used together with the \""+F+'" attribute - https://github.com/riot/riot/issues/2511')}_e(i,"virtualized",true);var f=Kt({tmpl:i.outerHTML},{root:i,parent:r},i.innerHTML);n.push(f)}else{n.push(Wt(s,{root:i,parent:r},i.innerHTML,r));return false}}_t.apply(r,[i,i.attributes,function(e,t){if(!t){return}n.push(t)}])});return n}function _t(e,t,r){var n=this;De(t,function(t){if(!t){return false}var i=t.name;var a=Pe(i);var o;if(Ke($,i)&&e.tagName.toLowerCase()!==I){o=Object.create(ut).init(e,n,i,t.value)}else if(Se.hasExpr(t.value)){o={dom:e,expr:t.value,attr:i,bool:a}}r(t,o)})}var wt=/<yield\b/i;var bt=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi;var xt=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi;var Nt=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi;var Ot={tr:"tbody",th:"tr",td:"tr",col:"colgroup"};var jt=se&&se<10?te:re;var Tt="div";var Ct="svg";function Et(e,t,r){var n=r[0]==="o",i=n?"select>":"table>";e.innerHTML="<"+i+t.trim()+"</"+i;i=e.firstChild;if(n){i.selectedIndex=-1}else{var a=Ot[r];if(a&&i.childElementCount===1){i=fe(a,i)}}return i}function kt(e,t){if(!wt.test(e)){return e}var r={};t=t&&t.replace(xt,function(e,t,n){r[t]=r[t]||n;return""}).trim();return e.replace(Nt,function(e,t,n){return r[t]||n||""}).replace(bt,function(e,r){return t||r||""})}function At(e,t,r){var n=e&&e.match(/^\s*<([-\w]+)/);var i=n&&n[1].toLowerCase();var a=ve(r?Ct:Tt);e=kt(e,t);if(jt.test(i)){a=Et(a,e,i)}else{he(a,e,r)}return a}function Lt(e,t){var r=this;var n=r.name;var i=r.tmpl;var a=r.css;var o=r.attrs;var s=r.onCreate;if(!P[n]){St(n,i,a,o,s);P[n].class=this.constructor}er(e,n,t,this);if(a){ke.inject()}return this}function St(e,t,r,n,i){if(Ie(n)){i=n;if(/^[\w-]+\s?=/.test(r)){n=r;r=""}else{n=""}}if(r){if(Ie(r)){i=r}else{ke.add(r)}}e=e.toLowerCase();P[e]={name:e,tmpl:t,attrs:n,fn:i};return e}function Rt(e,t,r,n,i){if(r){ke.add(r,e)}P[e]={name:e,tmpl:t,attrs:n,fn:i};return e}function Pt(e,t,r){var n=[];var i,a;function o(e){if(e.tagName){var i=ye(e,F),a;if(t&&i!==t){i=t;_e(e,F,t)}a=er(e,i||e.tagName.toLowerCase(),r);if(a){n.push(a)}}else if(e.length){De(e,o)}}ke.inject();if(Me(t)){r=t;t=0}if($e(e)){e=e==="*"?a=ar():e+ar(e.split(/, */));i=e?ue(e):[]}else{i=e}if(t==="*"){t=a||ar();if(i.tagName){i=ue(t,i)}else{var s=[];De(i,function(e){return s.push(ue(t,e))});i=s}t=0}o(i);return n}var It={};var Mt=It[M]={};var Bt=0;function $t(e,t,r){if(Me(e)){$t("__"+Bt+++"__",e,true);return}var n=r?Mt:It;if(!t){if(Be(n[e])){throw new Error("Unregistered mixin: "+e)}return n[e]}n[e]=Ie(t)?Xe(t.prototype,n[e]||{})&&t:Xe(n[e]||{},t)}function Ft(){return De(R,function(e){return e.update()})}function Ut(e){P[e]=null}var Vt="WIP";var Ht=Object.freeze({Tag:Lt,tag:St,tag2:Rt,mount:Pt,mixin:$t,update:Ft,unregister:Ut,version:Vt});function zt(e,t,r,n,i){if(e&&r){return}var a=e?nr.call(this):t||this;De(i,function(e){if(e.expr){at.call(a,e.expr)}n[qe(e.name).replace(B,"")]=e.expr?e.expr.value:e.value})}function Dt(e){var t=this.__;var r=t.isAnonymous;We(this,"isMounted",e);if(!r){if(e){this.trigger("mount")}else{this.trigger("unmount");this.off("*");this.__.wasCreated=false}}}function Kt(e,t,r){if(e===void 0)e={};if(t===void 0)t={};var n=t.context||{};var i=Xe({},t.opts);var a=t.parent;var o=t.isLoop;var s=!!t.isAnonymous;var u=et.skipAnonymousTags&&s;var f=t.item;var l=t.index;var c=[];var p=[];var v=[];var h=t.root;var d=t.tagName||Jt(h);var g=d==="virtual";var m=!g&&!e.tmpl;var y;if(!u){Re(n)}if(e.name&&h._tag){h._tag.unmount(true)}We(n,"isMounted",false);We(n,"__",{isAnonymous:s,instAttrs:c,innerHTML:r,tagName:d,index:l,isLoop:o,isInline:m,listeners:[],virts:[],wasCreated:false,tail:null,head:null,parent:null,item:null});We(n,"_riot_id",Ze());We(n,"root",h);Xe(n,{opts:i},f);We(n,"parent",a||null);We(n,"tags",{});We(n,"refs",{});if(m||o&&s){y=h}else{if(!g){h.innerHTML=""}y=At(e.tmpl,r,pe(h))}We(n,"update",function e(t){var r={};var f=n.isMounted&&!u;if(s&&a){Xe(n,a)}Xe(n,t);zt.apply(n,[o,a,s,r,c]);if(f&&n.isMounted&&Ie(n.shouldUpdate)&&!n.shouldUpdate(t,r)){return n}Xe(i,r);if(f){n.trigger("update",t)}ot.call(n,v);if(f){n.trigger("updated")}return n});We(n,"mixin",function e(){De(arguments,function(e){var t;var r;var a=[];var o=["init","__proto__"];e=$e(e)?$t(e):e;if(Ie(e)){t=new e}else{t=e}var s=Object.getPrototypeOf(t);do{a=a.concat(Object.getOwnPropertyNames(r||t))}while(r=Object.getPrototypeOf(r||t));De(a,function(e){if(!Ke(o,e)){var r=Je(t,e)||Je(s,e);var i=r&&(r.get||r.set);if(!n.hasOwnProperty(e)&&i){Object.defineProperty(n,e,r)}else{n[e]=Ie(t[e])?t[e].bind(n):t[e]}}});if(t.init){t.init.bind(n)(i)}});return n});We(n,"mount",function t(){h._tag=n;_t.apply(a,[h,h.attributes,function(e,t){if(!s&&ut.isPrototypeOf(t)){t.tag=n}e.expr=t;c.push(e)}]);be(e.attrs,function(e,t){p.push({name:e,value:t})});_t.apply(n,[h,p,function(e,t){if(t){v.push(t)}else{_e(h,e.name,e.value)}}]);zt.apply(n,[o,a,s,i,c]);var r=$t(M);if(r&&!u){for(var l in r){if(r.hasOwnProperty(l)){n.mixin(r[l])}}}if(e.fn){e.fn.call(n,i)}if(!u){n.trigger("before-mount")}De(yt.apply(n,[y,s]),function(e){return v.push(e)});n.update(f);if(!s&&!m){while(y.firstChild){h.appendChild(y.firstChild)}}We(n,"root",h);if(!u&&n.parent){var d=Zt(n.parent);d.one(!d.isMounted?"mount":"updated",function(){Dt.call(n,true)})}else{Dt.call(n,true)}n.__.wasCreated=true;return n});We(n,"unmount",function t(r){var i=n.root;var o=i.parentNode;var f=R.indexOf(n);if(!u){n.trigger("before-unmount")}be(e.attrs,function(e){if(Ge(e,B)){e=e.slice(B.length)}ge(h,e)});n.__.listeners.forEach(function(e){Object.keys(e[q]).forEach(function(t){e.removeEventListener(t,e[q][t])})});if(f!==-1){R.splice(f,1)}if(a&&!s){var l=Zt(a);if(g){Object.keys(n.tags).forEach(function(e){return Yt(l.tags,e,n.tags[e])})}else{Yt(l.tags,d,n)}}if(n.__.virts){De(n.__.virts,function(e){if(e.parentNode){e.parentNode.removeChild(e)}})}Qt(v);De(c,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()});if(r){he(i,"")}else if(o){o.removeChild(i)}if(n.__.onUnmount){n.__.onUnmount()}if(!n.isMounted){Dt.call(n,true)}Dt.call(n,false);delete n.root._tag;return n});return n}function qt(e){return e.tagName&&P[ye(e,F)||ye(e,F)||e.tagName.toLowerCase()]}function Gt(e,t){var r=this.parent;var n;if(!r){return}n=r.tags[e];if(Ve(n)){n.splice(t,0,n.splice(n.indexOf(this),1)[0])}else{Xt(r.tags,e,this)}}function Wt(e,t,r,n){var i=Kt(e,t,r);var a=t.tagName||Jt(t.root,true);var o=Zt(n);We(i,"parent",o);i.__.parent=n;Xt(o.tags,a,i);if(o!==n){Xt(n.tags,a,i)}return i}function Zt(e){var t=e;while(t.__.isAnonymous){if(!t.parent){break}t=t.parent}return t}function Qt(e){De(e,function(e){if(e.unmount){e.unmount(true)}else if(e.tagName){e.tag.unmount(true)}else if(e.unmount){e.unmount()}})}function Jt(e,t){var r=qt(e);var n=!t&&ye(e,F);return n&&!Se.hasExpr(n)?n:r?r.name:e.tagName.toLowerCase()}function Xt(e,t,r,n,i){var a=e[t];var o=Ve(a);var s=!Be(i);if(a&&a===r){return}if(!a&&n){e[t]=[r]}else if(!a){e[t]=r}else{if(o){var u=a.indexOf(r);if(u===i){return}if(u!==-1){a.splice(u,1)}if(s){a.splice(i,0,r)}else{a.push(r)}}else{e[t]=[a,r]}}}function Yt(e,t,r,n){if(Ve(e[t])){var i=e[t].indexOf(r);if(i!==-1){e[t].splice(i,1)}if(!e[t].length){delete e[t]}else if(e[t].length===1&&!n){e[t]=e[t][0]}}else if(e[t]===r){delete e[t]}}function er(e,t,r,n){var i=P[t];var a=P[t].class;var o=n||(a?Object.create(a.prototype):{});var s=e._innerHTML=e._innerHTML||e.innerHTML;var u=Xe({root:e,opts:r,context:o},{parent:r?r.parent:null});var f;if(i&&e){f=Kt(i,u,s)}if(f&&f.mount){f.mount(true);if(!Ke(R,f)){R.push(f)}}return f}function tr(e,t){var r=le();rr.call(e,r);t.parentNode.replaceChild(r,t)}function rr(e,t){var r=this;var n=ce();var i=ce();var a=le();var o;var s;this.root.insertBefore(n,this.root.firstChild);this.root.appendChild(i);this.__.head=s=n;this.__.tail=i;while(s){o=s.nextSibling;a.appendChild(s);r.__.virts.push(s);s=o}if(t){e.insertBefore(a,t.__.head)}else{e.appendChild(a)}}function nr(){if(this.parent){return Xe(Object.create(this),this.parent)}return this}function ir(e,t){var r=this;var n=this.__.head;var i;var a=le();while(n){i=n.nextSibling;a.appendChild(n);n=i;if(n===r.__.tail){a.appendChild(n);e.insertBefore(a,t.__.head);break}}}function ar(e){if(!e){var t=Object.keys(P);return t+ar(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var r=t.trim().toLowerCase();return e+",["+F+'="'+r+'"]'},"")}var or=Object.freeze({getTag:qt,moveChildTag:Gt,initChildTag:Wt,getImmediateCustomParentTag:Zt,unmountAll:Qt,getTagName:Jt,arrayishAdd:Xt,arrayishRemove:Yt,mountTo:er,makeReplaceVirtual:tr,makeVirtual:rr,inheritParentProps:nr,moveVirtual:ir,selectTags:ar});var sr=et;var ur={tmpl:Se,brackets:Le,styleManager:ke,vdom:R,styleNode:ke.styleNode,dom:Ne,check:ze,misc:Ye,tags:or};var fr=Xe({},Ht,{observable:Re,settings:sr,util:ur});var lr=function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];t.unshift("[riotx]");try{console.log.apply(console,t)}catch(e){console.log(t)}};var cr={debug:false,default:"@",changeBindName:"riotxChange",strict:false,logger:{output:lr}};var pr=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(!cr.debug){return}e.unshift("DEBUG");cr.logger.output.apply(null,e)};var vr=function(e){var t=new Error("[riotx] "+e);cr.logger.output.apply(null,["ERROR",t]);throw t};var hr=function e(t){var n=this;this.name=t.name;if(!this.name){this.name=cr.default;pr("Default store name. name="+this.name)}this._state=t.state;Object.defineProperty(this,"state",{get:function(){if(cr.strict){vr("[strict] Direct access get error.")}return n._state},set:function(e){if(cr.strict){vr("[strict] Direct access set error. "+e)}n._state=e}});this._actions=t.actions;this._mutations=t.mutations;this._getters=t.getters;this._plugins=t.plugins;fr.observable(this);r(this._plugins,function(e){if(!w(e)){vr("[plugin] The plugin is not a function.")}e.apply(null,[n])})};hr.prototype.reset=function e(){this.name=null;this._state=null;this._actions=null;this._mutations=null;this._getters=null;this._plugins=null;this.off("*")};hr.prototype.getter=function e(t,r){if(r&&!x(r)){vr("[getter]', 'The getter data is not object type. name="+t+" data="+r)}var n={state:this._state};var i=this._getters[t];if(!i||!w(i)){vr("[getter]', 'The getter is not a function. name="+t+" data="+r)}pr("[getter]",t,r);return i.apply(null,[n,r])};hr.prototype.commit=function e(t,n){var i=this;if(n&&!x(n)){vr("[mutation]', 'The mutation data is not object type. name="+t+" data="+n)}var a={getter:function(e,t){return i.getter.apply(i,[e,t])},state:this._state};var o=this._mutations[t];if(!o||!w(o)){vr("[mutation]', 'The mutation is not a function. name="+t+" data="+n)}pr("[mutation(before)]",t,this._state,n);var s=o.apply(null,[a,n]);pr("[mutation(after)]",t,this._state,n);this.trigger("riotx:mutations:after",t,s,a,n);r(s,function(e){i.trigger(e,i._state,i)})};hr.prototype.action=function e(t,r){var n=this;if(r&&!x(r)){vr("[action]', 'The action data is not object type. name="+t+" data="+r)}var i={getter:function(e,t){return n.getter.apply(n,[e,t])},commit:function(e,t){n.commit(e,t)}};var a=this._actions[t];if(!a||!w(a)){vr("[action] The action is not a function. name="+t+" data="+r)}pr("[action]",t,r);return T.resolve().then(function(){return a.apply(null,[i,r])})};hr.prototype.change=function e(){var t=[],r=arguments.length;while(r--)t[r]=arguments[r];(n=this).on.apply(n,t);var n};var dr=function t(){this.version=e||"";this.Store=hr;this.stores={};var n=function(e,t,r){var n=[],i=arguments.length-3;while(i-- >0)n[i]=arguments[i+3];this._riotx_change_handlers.push({store:e,evtName:t,handler:r});n.unshift(r);n.unshift(t);e.change.apply(e,n)};fr.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*");r(e._riotx_change_handlers,function(e){e.store.off(e.evtName,e.handler)});delete e.riotx;delete e._riotx_change_handlers;delete e[cr.changeBindName]});if(cr.debug){this.on("*",function(t){pr("[riot.mixin]",t,e)})}this._riotx_change_handlers=[];this[cr.changeBindName]=n},riotx:this})};dr.prototype.add=function e(t){if(this.stores[t.name]){vr("[store.add] The store instance named `"+t.name+"` already exists.")}this.stores[t.name]=t;return this};dr.prototype.get=function e(t){if(t===void 0)t=cr.default;return this.stores[t]};dr.prototype.debug=function e(t){cr.debug=!!t;return this};dr.prototype.setChangeBindName=function e(t){cr.changeBindName=t;return this};dr.prototype.strict=function e(t){cr.strict=!!t;return this};dr.prototype.logger=function e(t){cr.logger.output=t;return this};dr.prototype.reset=function e(){p(this.stores||{},function(e){e.reset()});this.stores={};return this};dr.prototype.size=function e(){return h(this.stores).length};var gr=new dr;return gr});