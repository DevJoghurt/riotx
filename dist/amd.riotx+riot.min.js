define(function(){"use strict";var e="0.9.3";function t(e,t,n){if(e==null){return}var r=-1,i=e.length;while(++r<i){if(t.call(n,e[r],r,e)===false){break}}}var n=t;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=r;var a;var o;function s(){o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];a=true;for(var e in{toString:null}){a=false}}function u(e,t,n){var r,u=0;if(a==null){s()}for(r in e){if(f(t,e,r,n)===false){break}}if(a){var l=e.constructor,c=!!l&&e===l.prototype;while(r=o[u++]){if((r!=="constructor"||!c&&i(e,r))&&e[r]!==Object.prototype[r]){if(f(t,e,r,n)===false){break}}}}}function f(e,t,n,r){return e.call(r,t[n],n,t)}var l=u;function c(e,t,n){l(e,function(r,a){if(i(e,a)){return t.call(n,e[a],a,e)}})}var h=c;var p=Object.keys||function(e){var t=[];h(e,function(e,n){t.push(n)});return t};var d=p;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var v=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty;var m=Object.prototype.propertyIsEnumerable;function y(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function _(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var n=0;n<10;n++){t["_"+String.fromCharCode(n)]=n}var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e});if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}var b=_()?Object.assign:function(e,t){var n=arguments;var r;var i=y(e);var a;for(var o=1;o<arguments.length;o++){r=Object(n[o]);for(var s in r){if(g.call(r,s)){i[s]=r[s]}}if(v){a=v(r);for(var u=0;u<a.length;u++){if(m.call(r,a[u])){i[a[u]]=r[a[u]]}}}}return i};var w=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function x(e,t){return t={exports:{}},e(t,t.exports),t.exports}var O=x(function(e){(function(t){var n=setTimeout;function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new")}if(typeof e!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];c(e,this)}function o(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;a._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?s:u)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){u(t.promise,e);return}s(t.promise,r)})}function s(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof a){e._state=3;e._value=t;f(e);return}else if(typeof n==="function"){c(i(n,t),e);return}}e._state=1;e._value=t;f(e)}catch(t){u(e,t)}}function u(e,t){e._state=2;e._value=t;f(e)}function f(e){if(e._state===2&&e._deferreds.length===0){a._immediateFn(function(){if(!e._handled){a._unhandledRejectionFn(e._value)}})}for(var t=0,n=e._deferreds.length;t<n;t++){o(e,e._deferreds[t])}e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=n}function c(e,t){var n=false;try{e(function(e){if(n){return}n=true;s(t,e)},function(e){if(n){return}n=true;u(t,e)})}catch(e){if(n){return}n=true;u(t,e)}}a.prototype["catch"]=function(e){return this.then(null,e)};a.prototype.then=function(e,t){var n=new this.constructor(r);o(this,new l(e,t,n));return n};a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){if(t.length===0){return e([])}var r=t.length;function i(a,o){try{if(o&&(typeof o==="object"||typeof o==="function")){var s=o.then;if(typeof s==="function"){s.call(o,function(e){i(a,e)},n);return}}t[a]=o;if(--r===0){e(t)}}catch(e){n(e)}}for(var a=0;a<t.length;a++){i(a,t[a])}})};a.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===a){return e}return new a(function(t){t(e)})};a.reject=function(e){return new a(function(t,n){n(e)})};a.race=function(e){return new a(function(t,n){for(var r=0,i=e.length;r<i;r++){e[r].then(t,n)}})};a._immediateFn=typeof setImmediate==="function"&&function(e){setImmediate(e)}||function(e){n(e,0)};a._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};a._setImmediateFn=function e(t){a._immediateFn=t};a._setUnhandledRejectionFn=function e(t){a._unhandledRejectionFn=t};if("object"!=="undefined"&&e.exports){e.exports=a}else if(!t.Promise){t.Promise=a}})(w)});var j=[];var N={};var E="__global_mixin";var C="riot-";var T=["ref","data-ref"];var k="data-is";var A="if";var L="each";var S="no-reorder";var I="show";var R="hide";var M="__riot-events__";var P="string";var F="object";var $="undefined";var B="function";var U="http://www.w3.org/1999/xlink";var H="http://www.w3.org/2000/svg";var V=/^xlink:(\w+)/;var z=typeof window===$?undefined:window;var D=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var q=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var K=/^on/;var W=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/;var Z=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var G={viewbox:"viewBox"};var Q=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var J=(z&&z.document||{}).documentMode|0;function X(e){return Q.test(e)}function Y(e){return typeof e===B}function ee(e){return e&&typeof e===F}function te(e){return typeof e===$}function ne(e){return typeof e===P}function re(e){return te(e)||e===null||e===""}function ie(e){return Array.isArray(e)||e instanceof Array}function ae(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return te(e[t])||n&&n.writable}function oe(e){return W.test(e)}var se=Object.freeze({isBoolAttr:X,isFunction:Y,isObject:ee,isUndefined:te,isString:ne,isBlank:re,isArray:ie,isWritable:ae,isReservedName:oe});function ue(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function fe(e,t){return(t||document).querySelector(e)}function le(){return document.createDocumentFragment()}function ce(){return document.createTextNode("")}function he(e){return!!e.ownerSVGElement}function pe(e){return e==="svg"?document.createElementNS(H,e):document.createElement(e)}function de(e,t){if(!te(e.innerHTML)){e.innerHTML=t}else{var n=(new DOMParser).parseFromString(t,"application/xml");var r=e.ownerDocument.importNode(n.documentElement,true);e.appendChild(r)}}function ve(e,t){e.style.display=t?"":"none";e["hidden"]=t?false:true}function ge(e,t){e.removeAttribute(t)}function me(e){return Object.keys(e).reduce(function(t,n){return t+" "+n+": "+e[n]+";"},"")}function ye(e,t){return e.getAttribute(t)}function _e(e,t,n){var r=V.exec(t);if(r&&r[1]){e.setAttributeNS(U,r[1],n)}else{e.setAttribute(t,n)}}function be(e,t,n){e.insertBefore(t,n.parentNode&&n)}function we(e,t){if(!e){return}var n;while(n=Z.exec(e)){t(n[1].toLowerCase(),n[2]||n[3]||n[4])}}function xe(e,t,n){if(e){var r=t(e,n);var i;if(r===false){return}e=e.firstChild;while(e){i=e.nextSibling;xe(e,t,r);e=i}}}var Oe=Object.freeze({$$:ue,$:fe,createFrag:le,createDOMPlaceholder:ce,isSvg:he,mkEl:pe,setInnerHTML:de,toggleVisibility:ve,remAttr:ge,styleObjectToString:me,getAttr:ye,setAttr:_e,safeInsert:be,walkAttrs:we,walkNodes:xe});var je;var Ne;var Ee={};var Ce=[];var Te=false;if(z){je=function(){var e=pe("style");_e(e,"type","text/css");var t=fe("style[type=riot]");if(t){if(t.id){e.id=t.id}t.parentNode.replaceChild(e,t)}else{document.getElementsByTagName("head")[0].appendChild(e)}return e}();Ne=je.styleSheet}var ke={styleNode:je,add:function e(t,n){if(n){Ee[n]=t}else{Ce.push(t)}Te=true},inject:function e(){if(!z||!Te){return}Te=false;var t=Object.keys(Ee).map(function(e){return Ee[e]}).concat(Ce).join("\n");if(Ne){Ne.cssText=t}else{je.innerHTML=t}}};var Ae=function(){var e="[{(,;:?=|&!^~>%*/";var t=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"];var n=t.reduce(function(e,t){return e+t.slice(-1)},"");var r=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/;var i=/[$\w]/;function a(e,t){while(--t>=0&&/\s/.test(e[t])){}return t}function o(o,s){var u=/.*/g;var f=u.lastIndex=s++;var l=u.exec(o)[0].match(r);if(l){var c=f+l[0].length;f=a(o,f);var h=o[f];if(f<0||~e.indexOf(h)){return c}if(h==="."){if(o[f-1]==="."){s=c}}else if(h==="+"||h==="-"){if(o[--f]!==h||(f=a(o,f))<0||!i.test(o[f])){s=c}}else if(~n.indexOf(h)){var p=f+1;while(--f>=0&&i.test(o[f])){}if(~t.indexOf(o.slice(f+1,p))){s=c}}}return s}return o}();var Le=function(e){var t="g",n=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,r=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,i=r.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\"+"x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=r.source+"|"+/(\/)(?![*\/])/.source,u={"(":RegExp("([()])|"+s,t),"[":RegExp("([[\\]])|"+s,t),"{":RegExp("([{}])|"+s,t)},f="{ }";var l=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,t),f,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var c=e,h,p=[],d;function v(e){return e}function g(e,n){if(!n){n=p}return new RegExp(e.source.replace(/{/g,n[2]).replace(/}/g,n[3]),e.global?t:"")}function m(e){if(e===f){return l}var n=e.split(" ");if(n.length!==2||a.test(e)){throw new Error('Unsupported brackets "'+e+'"')}n=n.concat(e.replace(o,"\\").split(" "));n[4]=g(n[1].length>1?/{[\S\s]*?}/:l[4],n);n[5]=g(e.length>3?/\\({|})/g:l[5],n);n[6]=g(l[6],n);n[7]=RegExp("\\\\("+n[3]+")|([[({])|("+n[3]+")|"+s,t);n[8]=e;return n}function y(e){return e instanceof RegExp?h(e):p[e]}y.split=function e(t,n,r){if(!r){r=p}var i=[],a,o,s,f,l=r[6];var c=[];var h="";var d,v;o=s=l.lastIndex=0;while(a=l.exec(t)){v=l.lastIndex;f=a.index;if(o){if(a[2]){var g=a[2];var m=u[g];var y=1;m.lastIndex=v;while(a=m.exec(t)){if(a[1]){if(a[1]===g){++y}else if(!--y){break}}else{m.lastIndex=b(a.index,m.lastIndex,a[2])}}l.lastIndex=y?t.length:m.lastIndex;continue}if(!a[3]){l.lastIndex=b(f,v,a[4]);continue}}if(!a[1]){_(t.slice(s,f));s=l.lastIndex;l=r[6+(o^=1)];l.lastIndex=s}}if(t&&s<t.length){_(t.slice(s))}i.qblocks=c;return i;function _(e){if(h){e=h+e;h=""}if(n||o){i.push(e&&e.replace(r[5],"$1"))}else{i.push(e)}}function b(e,r,i){if(i){r=Ae(t,e)}if(n&&r>e+2){d="⁗"+c.length+"~";c.push(t.slice(e,r));h+=t.slice(s,e)+d;s=r}return r}};y.hasExpr=function e(t){return p[4].test(t)};y.loopKeys=function e(t){var n=t.match(p[9]);return n?{key:n[1],pos:n[2],val:p[0]+n[3].trim()+p[1]}:{val:t.trim()}};y.array=function e(t){return t?m(t):p};function _(e){if((e||(e=f))!==p[8]){p=m(e);h=e===f?v:g;p[9]=h(l[9])}c=e}function b(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:_,get:function(){return c},enumerable:true});d=e;_(t)}Object.defineProperty(y,"settings",{set:b,get:function(){return d}});y.settings=typeof riot!=="undefined"&&riot.settings||{};y.set=_;y.skipRegex=Ae;y.R_STRINGS=r;y.R_MLCOMMS=n;y.S_QBLOCKS=i;y.S_QBLOCK2=s;return y}();var Se=function(){var e={};function t(t,i){if(!t){return t}return(e[t]||(e[t]=r(t))).call(i,n.bind({data:i,tmpl:t}))}t.hasExpr=Le.hasExpr;t.loopKeys=Le.loopKeys;t.clearCache=function(){e={}};t.errorHandler=null;function n(e,n){e.riotData={tagName:n&&n.__&&n.__.tagName,_riot_id:n&&n._riot_id};if(t.errorHandler){t.errorHandler(e)}else if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e.message);console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl);console.log(this.data)}}function r(e){var t=o(e);if(t.slice(0,11)!=="try{return "){t="return "+t}return new Function("E",t+";")}var i=/\u2057/g;var a=/\u2057(\d+)~/g;function o(e){var t=Le.split(e.replace(i,'"'),1);var n=t.qblocks;var r;if(t.length>2||t[0]){var o,s,u=[];for(o=s=0;o<t.length;++o){r=t[o];if(r&&(r=o&1?f(r,1,n):'"'+r.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')){u[s++]=r}}r=s<2?u[0]:"["+u.join(",")+'].join("")'}else{r=f(t[1],0,n)}if(n.length){r=r.replace(a,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})}return r}var s=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/;var u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function f(e,t,n){e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var r=[],i=0,a;while(e&&(a=e.match(s))&&!a.index){var o,f,l=/,|([[{(])|$/g;e=RegExp.rightContext;o=a[2]?n[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];while(f=(a=l.exec(e))[1]){c(f,l)}f=e.slice(0,a.index);e=RegExp.rightContext;r[i++]=p(f,1,o)}e=!i?p(e,t):i>1?"["+r.join(",")+'].join(" ").trim()':r[0]}return e;function c(t,n){var r,i=1,a=u[t];a.lastIndex=n.lastIndex;while(r=a.exec(e)){if(r[0]===t){++i}else if(!--i){break}}n.lastIndex=i?e.length:a.lastIndex}}var l='"in this?this:'+(typeof window!=="object"?"global":"window")+").",c=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,h=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function p(e,t,n){var r;e=e.replace(c,function(e,t,n,i,a){if(n){i=r?0:i+e.length;if(n!=="this"&&n!=="global"&&n!=="window"){e=t+'("'+n+l+n;if(i){r=(a=a[i])==="."||a==="("||a==="["}}else if(i){r=!h.test(a.slice(i))}}return e});if(r){e="try{return "+e+"}catch(e){E(e,this)}"}if(n){e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""'}else if(t){e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}t.version=Le.version="v3.0.8";return t}();var Ie=function(e){e=e||{};var t={},n=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(n,r){if(typeof r=="function"){(t[n]=t[n]||[]).push(r)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(n,r){if(n=="*"&&!r){t={}}else{if(r){var i=t[n];for(var a=0,o;o=i&&i[a];++a){if(o==r){i.splice(a--,1)}}}else{delete t[n]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)},enumerable:false,writable:false,configurable:false},trigger:{value:function(r){var i=arguments;var a=arguments.length-1,o=new Array(a),s,u,f;for(f=0;f<a;f++){o[f]=i[f+1]}s=n.call(t[r]||[],0);for(f=0;u=s[f];++f){u.apply(e,o)}if(t["*"]&&r!="*"){e.trigger.apply(e,["*",r].concat(o))}return e},enumerable:false,writable:false,configurable:false}});return e};function Re(e,t){var n=e?e.length:0;var r=0;for(;r<n;++r){t(e[r],r)}return e}function Me(e,t){return e.indexOf(t)!==-1}function Pe(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function Fe(e,t){return e.slice(0,t.length)===t}function $e(e,t,n,r){Object.defineProperty(e,t,Be({value:n,enumerable:false,writable:false,configurable:true},r));return e}function Be(e){var t,n=arguments;for(var r=1;r<n.length;++r){if(t=n[r]){for(var i in t){if(ae(e,i)){e[i]=t[i]}}}}return e}var Ue=Object.freeze({each:Re,contains:Me,toCamel:Pe,startsWith:Fe,defineProperty:$e,extend:Be});var He=Be(Object.create(Le.settings),{skipAnonymousTags:true,autoUpdate:true});function Ve(e,t,n){var r=this.__.parent,i=this.__.item;if(!i){while(r&&!i){i=r.__.item;r=r.__.parent}}if(ae(n,"currentTarget")){n.currentTarget=e}if(ae(n,"target")){n.target=n.srcElement}if(ae(n,"which")){n.which=n.charCode||n.keyCode}n.item=i;t.call(this,n);if(!He.autoUpdate){return}if(!n.preventUpdate){var a=Pt(this);if(a.isMounted){a.update()}}}function ze(e,t,n,r){var i,a=Ve.bind(r,n,t);n[e]=null;i=e.replace(K,"");if(!Me(r.__.listeners,n)){r.__.listeners.push(n)}if(!n[M]){n[M]={}}if(n[M][e]){n.removeEventListener(i,n[M][e])}n[M][e]=a;n.addEventListener(i,a,false)}function De(e,t,n){var r,i,a,o;if(e.tag&&e.tagName===n){e.tag.update();return}i=e.dom.tagName==="VIRTUAL";if(e.tag){if(i){a=e.tag.__.head;o=ce();a.parentNode.insertBefore(o,a)}e.tag.unmount(true)}if(!ne(n)){return}e.impl=N[n];r={root:e.dom,parent:t,hasImpl:true,tagName:n};e.tag=Mt(e.impl,r,e.dom.innerHTML,t);Re(e.attrs,function(t){return _e(e.tag.root,t.name,t.value)});e.tagName=n;e.tag.mount();if(i){zt(e.tag,o||e.tag.root)}t.__.onUnmount=function(){var t=e.tag.opts.dataIs,n=e.tag.parent.tags,r=e.tag.__.parent.tags;Ht(n,t,e.tag);Ht(r,t,e.tag);e.tag.unmount()}}function qe(e){if(!e){return null}e=e.replace(C,"");if(G[e]){e=G[e]}return e}function Ke(e){if(this.root&&ye(this.root,"virtualized")){return}var t=e.dom,n=qe(e.attr),r=Me([I,R],n),i=e.root&&e.root.tagName==="VIRTUAL",a=t&&(e.parent||t.parentNode),o=n==="style",s=n==="class",u,f,l;if(e._riot_id){if(e.isMounted){e.update()}else{e.mount();if(i){zt(e,e.root)}}return}if(e.update){return e.update()}l=Se(e.expr,r?Be({},Object.create(this.parent),this):this);u=!re(l);f=ee(l);if(f){f=!s&&!o;if(s){l=Se(JSON.stringify(l),this)}else if(o){l=me(l)}}if(e.attr&&(!e.isAttrRemoved||!u||l===false)){ge(t,e.attr);e.isAttrRemoved=true}if(e.bool){l=l?n:false}if(e.isRtag){return De(e,this,l)}if(e.wasParsedOnce&&e.value===l){return}e.value=l;e.wasParsedOnce=true;if(f&&!r){return}if(re(l)){l=""}if(!n){l+="";if(a){e.parent=a;if(a.tagName==="TEXTAREA"){a.value=l;if(!J){t.nodeValue=l}}else{t.nodeValue=l}}return}if(Y(l)){ze(n,l,t,this)}else if(r){ve(t,n===R?!l:l)}else{if(e.bool){t[n]=l}if(n==="value"&&t.value!==l){t.value=l}if(u&&l!==false){_e(t,n,l)}if(o&&t.hidden){ve(t,false)}}}function We(e){Re(e,Ke.bind(this))}var Ze={init:function e(t,n,r){ge(t,A);this.tag=n;this.expr=r;this.stub=ce();this.pristine=t;var i=t.parentNode;i.insertBefore(this.stub,t);i.removeChild(t);return this},update:function e(){this.value=Se(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=[];it.apply(this.tag,[this.current,this.expressions,true])}else if(!this.value&&this.current){Ft(this.expressions);if(this.current._tag){this.current._tag.unmount()}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current)}this.current=null;this.expressions=[]}if(this.value){We.call(this.tag,this.expressions)}},unmount:function e(){Ft(this.expressions||[])}};var Ge={init:function e(t,n,r,i){this.dom=t;this.attr=r;this.rawValue=i;this.parent=n;this.hasExp=Se.hasExpr(i);return this},update:function e(){var t=this.value;var n=this.parent&&Pt(this.parent);var r=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?Se(this.rawValue,this.parent):this.rawValue;if(!re(t)&&n){Ht(n.refs,t,r)}if(!re(this.value)&&ne(this.value)){if(n){Ut(n.refs,this.value,r,null,this.parent.__.index)}if(this.value!==t){_e(this.dom,this.attr,this.value)}}else{ge(this.dom,this.attr)}if(!this.dom.__ref){this.dom.__ref=r}},unmount:function e(){var t=this.tag||this.dom;var n=this.parent&&Pt(this.parent);if(!re(this.value)&&n){Ht(n.refs,this.value,t)}}};function Qe(e,t,n,r){var i=r?Object.create(r):{};i[e.key]=t;if(e.pos){i[e.pos]=n}return i}function Je(e,t){var n=t.length,r=e.length;while(n>r){n--;Xe.apply(t[n],[t,n])}}function Xe(e,t){e.splice(t,1);this.unmount();Ht(this.parent,this,this.__.tagName,true)}function Ye(e){var t=this;Re(Object.keys(this.tags),function(n){Rt.apply(t.tags[n],[n,e])})}function et(e,t,n){if(n){qt.apply(this,[e,t])}else{be(e,this.root,t.root)}}function tt(e,t,n){if(n){Dt.apply(this,[e,t])}else{be(e,this.root,t.root)}}function nt(e,t){if(t){Dt.call(this,e)}else{e.appendChild(this.root)}}function rt(e,t,n){ge(e,L);var r=typeof ye(e,S)!==P||ge(e,S),i=$t(e),a=N[i],o=e.parentNode,s=ce(),u=St(e),f=ye(e,A),l=[],c=[],h,p=true,d=!N[i],v=e.tagName==="VIRTUAL";n=Se.loopKeys(n);n.isLoop=true;if(f){ge(e,A)}o.insertBefore(s,e);o.removeChild(e);n.update=function o(){n.value=Se(n.val,t);var g=le(),m=n.value,y=!ie(m)&&!ne(m),_=s.parentNode;if(!_){return}if(y){h=m||false;m=h?Object.keys(m).map(function(e){return Qe(n,m[e],e)}):[]}else{h=false}if(f){m=m.filter(function(e,r){if(n.key&&!y){return!!Se(f,Qe(n,e,r,t))}return!!Se(f,Be(Object.create(t),e))})}Re(m,function(o,s){var f=r&&typeof o===F&&!h,y=c.indexOf(o),b=y===-1,w=!b&&f?y:s,x=l[w],O=s>=c.length,j=f&&b||!f&&!x;o=!h&&n.key?Qe(n,o,s):o;if(j){x=new Lt(a,{parent:t,isLoop:p,isAnonymous:d,tagName:i,root:e.cloneNode(d),item:o,index:s},e.innerHTML);x.mount();if(O){nt.apply(x,[g||_,v])}else{tt.apply(x,[_,l[s],v])}if(!O){c.splice(s,0,o)}l.splice(s,0,x);if(u){Ut(t.tags,i,x,true)}}else if(w!==s&&f){if(Me(m,c[w])){et.apply(x,[_,l[s],v]);l.splice(s,0,l.splice(w,1)[0]);c.splice(s,0,c.splice(w,1)[0])}if(n.pos){x[n.pos]=s}if(!u&&x.tags){Ye.call(x,s)}}x.__.item=o;x.__.index=s;x.__.parent=t;if(!j){x.update(o)}});Je(m,l);c=m.slice();_.insertBefore(g,s)};n.unmount=function(){Re(l,function(e){e.unmount()})};return n}function it(e,t,n){var r=this;var i={parent:{children:t}};xe(e,function(t,i){var a=t.nodeType,o=i.parent,s,u,f;if(!n&&t===e){return{parent:o}}if(a===3&&t.parentNode.tagName!=="STYLE"&&Se.hasExpr(t.nodeValue)){o.children.push({dom:t,expr:t.nodeValue})}if(a!==1){return i}var l=t.tagName==="VIRTUAL";if(s=ye(t,L)){if(l){_e(t,"loopVirtual",true)}o.children.push(rt(t,r,s));return false}if(s=ye(t,A)){o.children.push(Object.create(Ze).init(t,r,s));return false}if(u=ye(t,k)){if(Se.hasExpr(u)){o.children.push({isRtag:true,expr:u,dom:t,attrs:[].slice.call(t.attributes)});return false}}f=St(t);if(l){if(ye(t,"virtualized")){t.parentElement.removeChild(t)}if(!f&&!ye(t,"virtualized")&&!ye(t,"loopVirtual")){f={tmpl:t.outerHTML}}}if(f&&(t!==e||n)){if(l&&!ye(t,k)){_e(t,"virtualized",true);var c=new Lt({tmpl:t.outerHTML},{root:t,parent:r},t.innerHTML);o.children.push(c)}else{var h={root:t,parent:r,hasImpl:true};o.children.push(Mt(f,h,t.innerHTML,r));return false}}at.apply(r,[t,t.attributes,function(e,t){if(!t){return}o.children.push(t)}]);return{parent:o}},i)}function at(e,t,n){var r=this;Re(t,function(t){if(!t){return false}var i=t.name,a=X(i),o;if(Me(T,i)){o=Object.create(Ge).init(e,r,i,t.value)}else if(Se.hasExpr(t.value)){o={dom:e,expr:t.value,attr:i,bool:a}}n(t,o)})}var ot=/<yield\b/i;var st=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi;var ut=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi;var ft=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi;var lt={tr:"tbody",th:"tr",td:"tr",col:"colgroup"};var ct=J&&J<10?D:q;var ht="div";var pt="svg";function dt(e,t,n){var r=n[0]==="o",i=r?"select>":"table>";e.innerHTML="<"+i+t.trim()+"</"+i;i=e.firstChild;if(r){i.selectedIndex=-1}else{var a=lt[n];if(a&&i.childElementCount===1){i=fe(a,i)}}return i}function vt(e,t){if(!ot.test(e)){return e}var n={};t=t&&t.replace(ut,function(e,t,r){n[t]=n[t]||r;return""}).trim();return e.replace(ft,function(e,t,r){return n[t]||r||""}).replace(st,function(e,n){return t||n||""})}function gt(e,t,n){var r=e&&e.match(/^\s*<([-\w]+)/),i=r&&r[1].toLowerCase(),a=pe(n?pt:ht);e=vt(e,t);if(ct.test(i)){a=dt(a,e,i)}else{de(a,e)}return a}function mt(e,t){var n=this;var r=n.name;var i=n.tmpl;var a=n.css;var o=n.attrs;var s=n.onCreate;if(!N[r]){yt(r,i,a,o,s);N[r].class=this.constructor}Vt(e,r,t,this);if(a){ke.inject()}return this}function yt(e,t,n,r,i){if(Y(r)){i=r;if(/^[\w\-]+\s?=/.test(n)){r=n;n=""}else{r=""}}if(n){if(Y(n)){i=n}else{ke.add(n)}}e=e.toLowerCase();N[e]={name:e,tmpl:t,attrs:r,fn:i};return e}function _t(e,t,n,r,i){if(n){ke.add(n,e)}N[e]={name:e,tmpl:t,attrs:r,fn:i};return e}function bt(e,t,n){var r=[];var i,a;function o(e){if(e.tagName){var i=ye(e,k),a;if(t&&i!==t){i=t;_e(e,k,t)}a=Vt(e,i||e.tagName.toLowerCase(),n);if(a){r.push(a)}}else if(e.length){Re(e,o)}}ke.inject();if(ee(t)){n=t;t=0}if(ne(e)){e=e==="*"?a=Kt():e+Kt(e.split(/, */));i=e?ue(e):[]}else{i=e}if(t==="*"){t=a||Kt();if(i.tagName){i=ue(t,i)}else{var s=[];Re(i,function(e){return s.push(ue(t,e))});i=s}t=0}o(i);return r}var wt={};var xt=wt[E]={};var Ot=0;function jt(e,t,n){if(ee(e)){jt("__"+Ot+++"__",e,true);return}var r=n?xt:wt;if(!t){if(te(r[e])){throw new Error("Unregistered mixin: "+e)}return r[e]}r[e]=Y(t)?Be(t.prototype,r[e]||{})&&t:Be(r[e]||{},t)}function Nt(){return Re(j,function(e){return e.update()})}function Et(e){N[e]=null}var Ct="WIP";var Tt=Object.freeze({Tag:mt,tag:yt,tag2:_t,mount:bt,mixin:jt,update:Nt,unregister:Et,version:Ct});var kt=0;function At(e,t,n,r,i){if(e&&n){return}var a=!n&&e?this:t||this;Re(i,function(e){if(e.expr){We.call(a,[e.expr])}r[Pe(e.name).replace(C,"")]=e.expr?e.expr.value:e.value})}function Lt(e,t,n){if(e===void 0)e={};if(t===void 0)t={};var r=Be({},t.opts),i=t.parent,a=t.isLoop,o=!!t.isAnonymous,s=He.skipAnonymousTags&&o,u=Bt(t.item),f=t.index,l=[],c=[],h=[],p=t.root,d=t.tagName||$t(p),v=d==="virtual",g=!v&&!e.tmpl,m=[],y;if(!s){Ie(this)}if(e.name&&p._tag){p._tag.unmount(true)}this.isMounted=false;$e(this,"__",{isAnonymous:o,instAttrs:l,innerHTML:n,tagName:d,index:f,isLoop:a,isInline:g,listeners:[],virts:[],tail:null,head:null,parent:null,item:null});$e(this,"_riot_id",++kt);$e(this,"root",p);Be(this,{opts:r},u);$e(this,"parent",i||null);$e(this,"tags",{});$e(this,"refs",{});if(g||a&&o){y=p}else{if(!v){p.innerHTML=""}y=gt(e.tmpl,n,he(p))}$e(this,"update",function e(t){var n={},u=this.isMounted&&!s;t=Bt(t);Be(this,t);At.apply(this,[a,i,o,n,l]);if(u&&this.isMounted&&Y(this.shouldUpdate)&&!this.shouldUpdate(t,n)){return this}if(a&&o){It.apply(this,[this.parent,m])}Be(r,n);if(u){this.trigger("update",t)}We.call(this,h);if(u){this.trigger("updated")}return this}.bind(this));$e(this,"mixin",function e(){var t=this;Re(arguments,function(e){var n,r;var i=[];var a=["init","__proto__"];e=ne(e)?jt(e):e;if(Y(e)){n=new e}else{n=e}var o=Object.getPrototypeOf(n);do{i=i.concat(Object.getOwnPropertyNames(r||n))}while(r=Object.getPrototypeOf(r||n));Re(i,function(e){if(!Me(a,e)){var r=Object.getOwnPropertyDescriptor(n,e)||Object.getOwnPropertyDescriptor(o,e);var i=r&&(r.get||r.set);if(!t.hasOwnProperty(e)&&i){Object.defineProperty(t,e,r)}else{t[e]=Y(n[e])?n[e].bind(t):n[e]}}});if(n.init){n.init.bind(t)()}});return this}.bind(this));$e(this,"mount",function t(){var n=this;p._tag=this;at.apply(i,[p,p.attributes,function(e,t){if(!o&&Ge.isPrototypeOf(t)){t.tag=n}e.expr=t;l.push(e)}]);c=[];we(e.attrs,function(e,t){c.push({name:e,value:t})});at.apply(this,[p,c,function(e,t){if(t){h.push(t)}else{_e(p,e.name,e.value)}}]);At.apply(this,[a,i,o,r,l]);var f=jt(E);if(f&&!s){for(var d in f){if(f.hasOwnProperty(d)){n.mixin(f[d])}}}if(e.fn){e.fn.call(this,r)}if(!s){this.trigger("before-mount")}it.apply(this,[y,h,o]);this.update(u);if(!o&&!g){while(y.firstChild){p.appendChild(y.firstChild)}}$e(this,"root",p);$e(this,"isMounted",true);if(s){return}if(!this.parent){this.trigger("mount")}else{var v=Pt(this.parent);v.one(!v.isMounted?"mount":"updated",function(){n.trigger("mount")})}return this}.bind(this));$e(this,"unmount",function t(n){var r=this;var a=this.root,o=a.parentNode,u,f=j.indexOf(this);if(!s){this.trigger("before-unmount")}we(e.attrs,function(e){if(Fe(e,C)){e=e.slice(C.length)}ge(p,e)});this.__.listeners.forEach(function(e){Object.keys(e[M]).forEach(function(t){e.removeEventListener(t,e[M][t])})});if(f!==-1){j.splice(f,1)}if(o||v){if(i){u=Pt(i);if(v){Object.keys(this.tags).forEach(function(e){Ht(u.tags,e,r.tags[e])})}else{Ht(u.tags,d,this);if(i!==u){Ht(i.tags,d,this)}}}else{de(a,"")}if(o&&!n){o.removeChild(a)}}if(this.__.virts){Re(this.__.virts,function(e){if(e.parentNode){e.parentNode.removeChild(e)}})}Ft(h);Re(l,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()});if(this.__.onUnmount){this.__.onUnmount()}if(!s){this.trigger("unmount");this.off("*")}$e(this,"isMounted",false);delete this.root._tag;return this}.bind(this))}function St(e){return e.tagName&&N[ye(e,k)||ye(e,k)||e.tagName.toLowerCase()]}function It(e,t){var n=this;Re(Object.keys(e),function(r){var i=!oe(r)&&Me(t,r);if(te(n[r])||i){if(!i){t.push(r)}n[r]=e[r]}})}function Rt(e,t){var n=this.parent,r;if(!n){return}r=n.tags[e];if(ie(r)){r.splice(t,0,r.splice(r.indexOf(this),1)[0])}else{Ut(n.tags,e,this)}}function Mt(e,t,n,r){var i=new Lt(e,t,n),a=t.tagName||$t(t.root,true),o=Pt(r);$e(i,"parent",o);i.__.parent=r;Ut(o.tags,a,i);if(o!==r){Ut(r.tags,a,i)}return i}function Pt(e){var t=e;while(t.__.isAnonymous){if(!t.parent){break}t=t.parent}return t}function Ft(e){Re(e,function(e){if(e instanceof Lt){e.unmount(true)}else if(e.tagName){e.tag.unmount(true)}else if(e.unmount){e.unmount()}})}function $t(e,t){var n=St(e),r=!t&&ye(e,k);return r&&!Se.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase()}function Bt(e){if(!(e instanceof Lt)&&!(e&&Y(e.trigger))){return e}var t={};for(var n in e){if(!W.test(n)){t[n]=e[n]}}return t}function Ut(e,t,n,r,i){var a=e[t];var o=ie(a);var s=!te(i);if(a&&a===n){return}if(!a&&r){e[t]=[n]}else if(!a){e[t]=n}else{if(o){var u=a.indexOf(n);if(u===i){return}if(u!==-1){a.splice(u,1)}if(s){a.splice(i,0,n)}else{a.push(n)}}else{e[t]=[a,n]}}}function Ht(e,t,n,r){if(ie(e[t])){var i=e[t].indexOf(n);if(i!==-1){e[t].splice(i,1)}if(!e[t].length){delete e[t]}else if(e[t].length===1&&!r){e[t]=e[t][0]}}else{delete e[t]}}function Vt(e,t,n,r){var i=N[t],a=N[t].class,o=r||(a?Object.create(a.prototype):{}),s=e._innerHTML=e._innerHTML||e.innerHTML;var u=Be({root:e,opts:n},{parent:n?n.parent:null});if(i&&e){Lt.apply(o,[i,u,s])}if(o&&o.mount){o.mount(true);if(!Me(j,o)){j.push(o)}}return o}function zt(e,t){var n=le();Dt.call(e,n);t.parentNode.replaceChild(n,t)}function Dt(e,t){var n=this;var r=ce(),i=ce(),a=le(),o,s;this.root.insertBefore(r,this.root.firstChild);this.root.appendChild(i);this.__.head=s=r;this.__.tail=i;while(s){o=s.nextSibling;a.appendChild(s);n.__.virts.push(s);s=o}if(t){e.insertBefore(a,t.__.head)}else{e.appendChild(a)}}function qt(e,t){var n=this;var r=this.__.head,i=le(),a;while(r){a=r.nextSibling;i.appendChild(r);r=a;if(r===n.__.tail){i.appendChild(r);e.insertBefore(i,t.__.head);break}}}function Kt(e){if(!e){var t=Object.keys(N);return t+Kt(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var n=t.trim().toLowerCase();return e+",["+k+'="'+n+'"]'},"")}var Wt=Object.freeze({getTag:St,inheritFrom:It,moveChildTag:Rt,initChildTag:Mt,getImmediateCustomParentTag:Pt,unmountAll:Ft,getTagName:$t,cleanUpData:Bt,arrayishAdd:Ut,arrayishRemove:Ht,mountTo:Vt,makeReplaceVirtual:zt,makeVirtual:Dt,moveVirtual:qt,selectTags:Kt});var Zt=He;var Gt={tmpl:Se,brackets:Le,styleManager:ke,vdom:j,styleNode:ke.styleNode,dom:Oe,check:se,misc:Ue,tags:Wt};var Qt=Be({},Tt,{observable:Ie,settings:Zt,util:Gt});var Jt={debug:false,default:"@",changeBindName:"riotxChange"};var Xt=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(!Jt.debug){return}e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var Yt=function e(t){this.name=t.name;if(!this.name){this.name=Jt.default;Xt("Default store name. name="+this.name)}this.state=b({},t.state);this._actions=b({},t.actions);this._mutations=b({},t.mutations);this._getters=b({},t.getters);Qt.observable(this)};Yt.prototype.getter=function e(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];Xt("[getter]",t,n);var i={state:b({},this.state)};return this._getters[t].apply(null,[i].concat(n))};Yt.prototype.commit=function e(t){var r=this;var i=[],a=arguments.length-1;while(a-- >0)i[a]=arguments[a+1];var o=b({},this.state);Xt.apply(void 0,["[commit(before)]",t,o].concat(i));var s={getter:function(e){var t=[],n=arguments.length-1;while(n-- >0)t[n]=arguments[n+1];return r.getter.apply(r,[e].concat(t))},state:o};var u=this._mutations[t].apply(null,[s].concat(i));Xt.apply(void 0,["[commit(after)]",t,o].concat(i));b(this.state,o);n(u,function(e){r.trigger(e,r.state,r)})};Yt.prototype.action=function e(t){var n=this;var r=[],i=arguments.length-1;while(i-- >0)r[i]=arguments[i+1];Xt("[action]",t,r);var a={getter:function(e){var t=[],r=arguments.length-1;while(r-- >0)t[r]=arguments[r+1];return n.getter.apply(n,[e].concat(t))},state:b({},this.state),commit:function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];(r=n).commit.apply(r,e);var r}};return O.resolve().then(function(){return n._actions[t].apply(null,[a].concat(r))})};Yt.prototype.change=function e(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];(r=this).on.apply(r,t);var r};var en=function t(){this.version=e||"";this.Store=Yt;this.stores={};var r=function(e,t){var n=[],r=arguments.length-2;while(r-- >0)n[r]=arguments[r+2];this._riotx_change_handlers.push({store:e,evtName:t});n.unshift(t);e.change.apply(e,n)};Qt.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*");n(e._riotx_change_handlers,function(e){e.store.off(e.evtName)});delete e.riotx;delete e._riotx_change_handlers;delete e[Jt.changeBindName]});if(Jt.debug){this.on("*",function(t){Xt(t,e)})}this[Jt.changeBindName]=r},riotx:this,_riotx_change_handlers:[]})};en.prototype.add=function e(t){if(this.stores[t.name]){throw new Error("The store instance named `"+t.name+"` already exists.")}this.stores[t.name]=t;return this};en.prototype.get=function e(t){if(t===void 0)t=Jt.default;return this.stores[t]};en.prototype.debug=function e(t){Jt.debug=!!t;return this};en.prototype.setChangeBindName=function e(t){Jt.changeBindName=t;return this};en.prototype.reset=function e(){this.stores={};return this};en.prototype.size=function e(){return d(this.stores).length};var tn=new en;return tn});