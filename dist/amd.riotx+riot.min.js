define(function(){"use strict";var e="0.0.1";var t=[];var r={};var i="__global_mixin";var n="riot-";var a=["ref","data-ref"];var s="data-is";var o="if";var u="each";var f="no-reorder";var l="show";var c="hide";var h="__riot-events__";var p="string";var d="object";var v="undefined";var g="function";var m="http://www.w3.org/1999/xlink";var y=/^xlink:(\w+)/;var b=typeof window===v?undefined:window;var x=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;var _=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;var w=/^on/;var N=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/;var O=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;var j={viewbox:"viewBox"};var C=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;var T=(b&&b.document||{}).documentMode|0;function E(e){return C.test(e)}function L(e){return typeof e===g}function A(e){return e&&typeof e===d}function M(e){return typeof e===v}function k(e){return typeof e===p}function S(e){return M(e)||e===null||e===""}function R(e){return Array.isArray(e)||e instanceof Array}function I(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return M(e[t])||r&&r.writable}function P(e){return N.test(e)}var H=Object.freeze({isBoolAttr:E,isFunction:L,isObject:A,isUndefined:M,isString:k,isBlank:S,isArray:R,isWritable:I,isReservedName:P});function $(e,t){return(t||document).querySelectorAll(e)}function V(e,t){return(t||document).querySelector(e)}function B(){return document.createDocumentFragment()}function U(){return document.createTextNode("")}function z(e){return document.createElement(e)}function D(e,t){if(!M(e.innerHTML)){e.innerHTML=t}else{var r=(new DOMParser).parseFromString(t,"application/xml");var i=e.ownerDocument.importNode(r.documentElement,true);e.appendChild(i)}}function F(e,t){e.style.display=t?"":"none";e["hidden"]=t?false:true}function K(e,t){e.removeAttribute(t)}function q(e){return Object.keys(e).reduce(function(t,r){return t+" "+r+": "+e[r]+";"},"")}function W(e,t){return e.getAttribute(t)}function Z(e,t,r){var i=y.exec(t);if(i&&i[1]){e.setAttributeNS(m,i[1],r)}else{e.setAttribute(t,r)}}function Q(e,t,r){e.insertBefore(t,r.parentNode&&r)}function G(e,t){if(!e){return}var r;while(r=O.exec(e)){t(r[1].toLowerCase(),r[2]||r[3]||r[4])}}function J(e,t,r){if(e){var i=t(e,r);var n;if(i===false){return}e=e.firstChild;while(e){n=e.nextSibling;J(e,t,i);e=n}}}var X=Object.freeze({$$:$,$:V,createFrag:B,createDOMPlaceholder:U,mkEl:z,setInnerHTML:D,toggleVisibility:F,remAttr:K,styleObjectToString:q,getAttr:W,setAttr:Z,safeInsert:Q,walkAttrs:G,walkNodes:J});var Y;var ee;var te={};var re=[];var ie=false;if(b){Y=function(){var e=z("style");Z(e,"type","text/css");var t=V("style[type=riot]");if(t){if(t.id){e.id=t.id}t.parentNode.replaceChild(e,t)}else{document.getElementsByTagName("head")[0].appendChild(e)}return e}();ee=Y.styleSheet}var ne={styleNode:Y,add:function e(t,r){if(r){te[r]=t}else{re.push(t)}ie=true},inject:function e(){if(!b||!ie){return}ie=false;var t=Object.keys(te).map(function(e){return te[e]}).concat(re).join("\n");if(ee){ee.cssText=t}else{Y.innerHTML=t}}};var ae=function(e){var t="g",r=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,i=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,n=i.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,a=RegExp("[\\"+"x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),s=/(?=[[\]()*+?.^$|])/g,o={"(":RegExp("([()])|"+n,t),"[":RegExp("([[\\]])|"+n,t),"{":RegExp("([{}])|"+n,t)},u="{ }";var f=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+n,t),u,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/];var l=e,c,h=[],p;function d(e){return e}function v(e,r){if(!r){r=h}return new RegExp(e.source.replace(/{/g,r[2]).replace(/}/g,r[3]),e.global?t:"")}function g(e){if(e===u){return f}var r=e.split(" ");if(r.length!==2||a.test(e)){throw new Error('Unsupported brackets "'+e+'"')}r=r.concat(e.replace(s,"\\").split(" "));r[4]=v(r[1].length>1?/{[\S\s]*?}/:f[4],r);r[5]=v(e.length>3?/\\({|})/g:f[5],r);r[6]=v(f[6],r);r[7]=RegExp("\\\\("+r[3]+")|([[({])|("+r[3]+")|"+n,t);r[8]=e;return r}function m(e){return e instanceof RegExp?c(e):h[e]}m.split=function e(t,r,i){if(!i){i=h}var n=[],a,s,u,f,l=i[6];s=u=l.lastIndex=0;while(a=l.exec(t)){f=a.index;if(s){if(a[2]){l.lastIndex=p(t,a[2],l.lastIndex);continue}if(!a[3]){continue}}if(!a[1]){c(t.slice(u,f));u=l.lastIndex;l=i[6+(s^=1)];l.lastIndex=u}}if(t&&u<t.length){c(t.slice(u))}return n;function c(e){if(r||s){n.push(e&&e.replace(i[5],"$1"))}else{n.push(e)}}function p(e,t,r){var i,n=o[t];n.lastIndex=r;r=1;while(i=n.exec(e)){if(i[1]&&!(i[1]===t?++r:--r)){break}}return r?e.length:n.lastIndex}};m.hasExpr=function e(t){return h[4].test(t)};m.loopKeys=function e(t){var r=t.match(h[9]);return r?{key:r[1],pos:r[2],val:h[0]+r[3].trim()+h[1]}:{val:t.trim()}};m.array=function e(t){return t?g(t):h};function y(e){if((e||(e=u))!==h[8]){h=g(e);c=e===u?d:v;h[9]=c(f[9])}l=e}function b(e){var t;e=e||{};t=e.brackets;Object.defineProperty(e,"brackets",{set:y,get:function(){return l},enumerable:true});p=e;y(t)}Object.defineProperty(m,"settings",{set:b,get:function(){return p}});m.settings=typeof riot!=="undefined"&&riot.settings||{};m.set=y;m.R_STRINGS=i;m.R_MLCOMMS=r;m.S_QBLOCKS=n;return m}();var se=function(){var e={};function t(t,n){if(!t){return t}return(e[t]||(e[t]=i(t))).call(n,r)}t.hasExpr=ae.hasExpr;t.loopKeys=ae.loopKeys;t.clearCache=function(){e={}};t.errorHandler=null;function r(e,r){e.riotData={tagName:r&&r.__&&r.__.tagName,_riot_id:r&&r._riot_id};if(t.errorHandler){t.errorHandler(e)}else if(typeof console!=="undefined"&&typeof console.error==="function"){if(e.riotData.tagName){console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName)}console.error(e)}}function i(e){var t=f(e);if(t.slice(0,11)!=="try{return "){t="return "+t}return new Function("E",t+";")}var n=String.fromCharCode(8279),a=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,s=RegExp(ae.S_QBLOCKS,"g"),o=/\u2057/g,u=/\u2057(\d+)~/g;function f(e){var t=[],r,i=ae.split(e.replace(o,'"'),1);if(i.length>2||i[0]){var n,a,s=[];for(n=a=0;n<i.length;++n){r=i[n];if(r&&(r=n&1?c(r,1,t):'"'+r.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')){s[a++]=r}}r=a<2?s[0]:"["+s.join(",")+'].join("")'}else{r=c(i[1],0,t)}if(t[0]){r=r.replace(u,function(e,r){return t[r].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})}return r}var l={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function c(e,t,r){e=e.replace(s,function(e,t){return e.length>2&&!t?n+(r.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(e){var i=[],o=0,u;while(e&&(u=e.match(a))&&!u.index){var f,c,h=/,|([[{(])|$/g;e=RegExp.rightContext;f=u[2]?r[u[2]].slice(1,-1).trim().replace(/\s+/g," "):u[1];while(c=(u=h.exec(e))[1]){p(c,h)}c=e.slice(0,u.index);e=RegExp.rightContext;i[o++]=v(c,1,f)}e=!o?v(e,t):o>1?"["+i.join(",")+'].join(" ").trim()':i[0]}return e;function p(t,r){var i,n=1,a=l[t];a.lastIndex=r.lastIndex;while(i=a.exec(e)){if(i[0]===t){++n}else if(!--n){break}}r.lastIndex=n?e.length:a.lastIndex}}var h='"in this?this:'+(typeof window!=="object"?"global":"window")+").",p=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,d=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function v(e,t,r){var i;e=e.replace(p,function(e,t,r,n,a){if(r){n=i?0:n+e.length;if(r!=="this"&&r!=="global"&&r!=="window"){e=t+'("'+r+h+r;if(n){i=(a=a[n])==="."||a==="("||a==="["}}else if(n){i=!d.test(a.slice(n))}}return e});if(i){e="try{return "+e+"}catch(e){E(e,this)}"}if(r){e=(i?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+r+'":""'}else if(t){e="function(v){"+(i?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'}return e}t.version=ae.version="v3.0.3";return t}();var oe=function(e){e=e||{};var t={},r=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(r,i){if(typeof i=="function"){(t[r]=t[r]||[]).push(i)}return e},enumerable:false,writable:false,configurable:false},off:{value:function(r,i){if(r=="*"&&!i){t={}}else{if(i){var n=t[r];for(var a=0,s;s=n&&n[a];++a){if(s==i){n.splice(a--,1)}}}else{delete t[r]}}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,r){function i(){e.off(t,i);r.apply(e,arguments)}return e.on(t,i)},enumerable:false,writable:false,configurable:false},trigger:{value:function(i){var n=arguments;var a=arguments.length-1,s=new Array(a),o,u,f;for(f=0;f<a;f++){s[f]=n[f+1]}o=r.call(t[i]||[],0);for(f=0;u=o[f];++f){u.apply(e,s)}if(t["*"]&&i!="*"){e.trigger.apply(e,["*",i].concat(s))}return e},enumerable:false,writable:false,configurable:false}});return e};function ue(e,t){var r=e?e.length:0;var i=0;for(;i<r;++i){t(e[i],i)}return e}function fe(e,t){return e.indexOf(t)!==-1}function le(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function ce(e,t){return e.slice(0,t.length)===t}function he(e,t,r,i){Object.defineProperty(e,t,pe({value:r,enumerable:false,writable:false,configurable:true},i));return e}function pe(e){var t,r=arguments;for(var i=1;i<r.length;++i){if(t=r[i]){for(var n in t){if(I(e,n)){e[n]=t[n]}}}}return e}var de=Object.freeze({each:ue,contains:fe,toCamel:le,startsWith:ce,defineProperty:he,extend:pe});var ve=pe(Object.create(ae.settings),{skipAnonymousTags:true});function ge(e,t,r){var i=this.__.parent,n=this.__.item;if(!n){while(i&&!n){n=i.__.item;i=i.__.parent}}if(I(r,"currentTarget")){r.currentTarget=e}if(I(r,"target")){r.target=r.srcElement}if(I(r,"which")){r.which=r.charCode||r.keyCode}r.item=n;t.call(this,r);if(!r.preventUpdate){var a=ft(this);if(a.isMounted){a.update()}}}function me(e,t,r,i){var n,a=ge.bind(i,r,t);n=e.replace(w,"");if(!fe(i.__.listeners,r)){i.__.listeners.push(r)}if(!r[h]){r[h]={}}if(r[h][e]){r.removeEventListener(n,r[h][e])}r[h][e]=a;r.addEventListener(n,a,false)}function ye(e,t,i){var n,a,s,o;if(e.tag&&e.tagName===i){e.tag.update();return}a=e.dom.tagName==="VIRTUAL";if(e.tag){if(a){s=e.tag.__.head;o=U();s.parentNode.insertBefore(o,s)}e.tag.unmount(true)}e.impl=r[i];n={root:e.dom,parent:t,hasImpl:true,tagName:i};e.tag=ut(e.impl,n,e.dom.innerHTML,t);ue(e.attrs,function(t){return Z(e.tag.root,t.name,t.value)});e.tagName=i;e.tag.mount();if(a){gt(e.tag,o||e.tag.root)}t.__.onUnmount=function(){var t=e.tag.opts.dataIs,r=e.tag.parent.tags,i=e.tag.__.parent.tags;dt(r,t,e.tag);dt(i,t,e.tag);e.tag.unmount()}}function be(e){if(!e){return null}e=e.replace(n,"");if(j[e]){e=j[e]}return e}function xe(e){if(this.root&&W(this.root,"virtualized")){return}var t=e.dom,r=be(e.attr),i=fe([l,c],r),n=e.root&&e.root.tagName==="VIRTUAL",a=t&&(e.parent||t.parentNode),s=r==="style",o=r==="class",u,f;if(e._riot_id){if(e.isMounted){e.update()}else{e.mount();if(n){gt(e,e.root)}}return}if(e.update){return e.update()}f=se(e.expr,this);u=A(f);if(u){u=!o&&!s;if(o){f=se(JSON.stringify(f),this)}else if(s){f=q(f)}}if(e.bool){f=f?r:false}if(e.isRtag){return ye(e,this,f)}if(e.wasParsedOnce&&e.value===f){return}e.value=f;e.wasParsedOnce=true;if(u&&!i){return}if(S(f)){f=""}if(!r){f+="";if(a){e.parent=a;if(a.tagName==="TEXTAREA"){a.value=f;if(!T){t.nodeValue=f}}else{t.nodeValue=f}}return}if(!e.isAttrRemoved||!f){K(t,e.attr);e.isAttrRemoved=true}if(L(f)){me(r,f,t,this)}else if(i){F(t,r===c?!f:f)}else{if(e.bool){t[r]=f}if(r==="value"&&t.value!==f){t.value=f}if(!S(f)&&f!==false){Z(t,r,f)}if(s&&t.hidden){F(t,false)}}}function _e(e){ue(e,xe.bind(this))}var we={init:function e(t,r,i){K(t,o);this.tag=r;this.expr=i;this.stub=document.createTextNode("");this.pristine=t;var n=t.parentNode;n.insertBefore(this.stub,t);n.removeChild(t);return this},update:function e(){this.value=se(this.expr,this.tag);if(this.value&&!this.current){this.current=this.pristine.cloneNode(true);this.stub.parentNode.insertBefore(this.current,this.stub);this.expressions=[];ke.apply(this.tag,[this.current,this.expressions,true])}else if(!this.value&&this.current){lt(this.expressions);if(this.current._tag){this.current._tag.unmount()}else if(this.current.parentNode){this.current.parentNode.removeChild(this.current)}this.current=null;this.expressions=[]}if(this.value){_e.call(this.tag,this.expressions)}},unmount:function e(){lt(this.expressions||[]);delete this.pristine;delete this.parentNode;delete this.stub}};var Ne={init:function e(t,r,i,n){this.dom=t;this.attr=i;this.rawValue=n;this.parent=r;this.hasExp=se.hasExpr(n);return this},update:function e(){var t=this.value;var r=this.parent&&ft(this.parent);var i=this.tag||this.dom;this.value=this.hasExp?se(this.rawValue,this.parent):this.rawValue;if(!S(t)&&r){dt(r.refs,t,i)}if(S(this.value)){K(this.dom,this.attr)}else{if(r){pt(r.refs,this.value,i,null,this.parent.__.index)}Z(this.dom,this.attr,this.value)}},unmount:function e(){var t=this.tag||this.dom;var r=this.parent&&ft(this.parent);if(!S(this.value)&&r){dt(r.refs,this.value,t)}delete this.dom;delete this.parent}};function Oe(e,t,r,i){var n=i?Object.create(i):{};n[e.key]=t;if(e.pos){n[e.pos]=r}return n}function je(e,t){var r=t.length,i=e.length;while(r>i){r--;Ce.apply(t[r],[t,r])}}function Ce(e,t){e.splice(t,1);this.unmount();dt(this.parent,this,this.__.tagName,true)}function Te(e){var t=this;ue(Object.keys(this.tags),function(r){ot.apply(t.tags[r],[r,e])})}function Ee(e,t,r){if(r){yt.apply(this,[e,t])}else{Q(e,this.root,t.root)}}function Le(e,t,r){if(r){mt.apply(this,[e,t])}else{Q(e,this.root,t.root)}}function Ae(e,t){if(t){mt.call(this,e)}else{e.appendChild(this.root)}}function Me(e,t,i){K(e,u);var n=typeof W(e,f)!==p||K(e,f),a=ct(e),s=r[a],l=e.parentNode,c=U(),h=at(e),v=W(e,o),g=[],m=[],y,b=true,x=!r[a],_=e.tagName==="VIRTUAL";i=se.loopKeys(i);i.isLoop=true;if(v){K(e,o)}l.insertBefore(c,e);l.removeChild(e);i.update=function r(){i.value=se(i.val,t);var o=B(),u=i.value,f=!R(u)&&!k(u),l=c.parentNode;if(f){y=u||false;u=y?Object.keys(u).map(function(e){return Oe(i,u[e],e)}):[]}else{y=false}if(v){u=u.filter(function(e,r){if(i.key&&!f){return!!se(v,Oe(i,e,r,t))}return!!se(v,pe(Object.create(t),e))})}ue(u,function(r,f){var c=n&&typeof r===d&&!y,p=m.indexOf(r),v=p===-1,w=!v&&c?p:f,N=g[w],O=f>=m.length,j=c&&v||!c&&!N;r=!y&&i.key?Oe(i,r,f):r;if(j){N=new nt(s,{parent:t,isLoop:b,isAnonymous:x,tagName:a,root:e.cloneNode(x),item:r,index:f},e.innerHTML);N.mount();if(O){Ae.apply(N,[o||l,_])}else{Le.apply(N,[l,g[f],_])}if(!O){m.splice(f,0,r)}g.splice(f,0,N);if(h){pt(t.tags,a,N,true)}}else if(w!==f&&c){if(fe(u,m[w])){Ee.apply(N,[l,g[f],_]);g.splice(f,0,g.splice(w,1)[0]);m.splice(f,0,m.splice(w,1)[0])}if(i.pos){N[i.pos]=f}if(!h&&N.tags){Te.call(N,f)}}N.__.item=r;N.__.index=f;N.__.parent=t;if(!j){N.update(r)}});je(u,g);m=u.slice();l.insertBefore(o,c)};i.unmount=function(){ue(g,function(e){e.unmount()})};return i}function ke(e,t,r){var i=this;var n={parent:{children:t}};J(e,function(t,n){var a=t.nodeType,f=n.parent,l,c,h;if(!r&&t===e){return{parent:f}}if(a===3&&t.parentNode.tagName!=="STYLE"&&se.hasExpr(t.nodeValue)){f.children.push({dom:t,expr:t.nodeValue})}if(a!==1){return n}var p=t.tagName==="VIRTUAL";if(l=W(t,u)){if(p){Z(t,"loopVirtual",true)}f.children.push(Me(t,i,l));return false}if(l=W(t,o)){f.children.push(Object.create(we).init(t,i,l));return false}if(c=W(t,s)){if(se.hasExpr(c)){f.children.push({isRtag:true,expr:c,dom:t,attrs:[].slice.call(t.attributes)});return false}}h=at(t);if(p){if(W(t,"virtualized")){t.parentElement.removeChild(t)}if(!h&&!W(t,"virtualized")&&!W(t,"loopVirtual")){h={tmpl:t.outerHTML}}}if(h&&(t!==e||r)){if(p&&!W(t,s)){Z(t,"virtualized",true);var d=new nt({tmpl:t.outerHTML},{root:t,parent:i},t.innerHTML);f.children.push(d)}else{var v={root:t,parent:i,hasImpl:true};f.children.push(ut(h,v,t.innerHTML,i));return false}}Se.apply(i,[t,t.attributes,function(e,t){if(!t){return}f.children.push(t)}]);return{parent:f}},n)}function Se(e,t,r){var i=this;ue(t,function(t){var n=t.name,s=E(n),o;if(fe(a,n)){o=Object.create(Ne).init(e,i,n,t.value)}else if(se.hasExpr(t.value)){o={dom:e,expr:t.value,attr:n,bool:s}}r(t,o)})}var Re=/<yield\b/i;var Ie=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi;var Pe=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi;var He=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi;var $e={tr:"tbody",th:"tr",td:"tr",col:"colgroup"};var Ve=T&&T<10?x:_;var Be="div";function Ue(e,t,r){var i=r[0]==="o",n=i?"select>":"table>";e.innerHTML="<"+n+t.trim()+"</"+n;n=e.firstChild;if(i){n.selectedIndex=-1}else{var a=$e[r];if(a&&n.childElementCount===1){n=V(a,n)}}return n}function ze(e,t){if(!Re.test(e)){return e}var r={};t=t&&t.replace(Pe,function(e,t,i){r[t]=r[t]||i;return""}).trim();return e.replace(He,function(e,t,i){return r[t]||i||""}).replace(Ie,function(e,r){return t||r||""})}function De(e,t){var r=e&&e.match(/^\s*<([-\w]+)/),i=r&&r[1].toLowerCase(),n=z(Be);e=ze(e,t);if(Ve.test(i)){n=Ue(n,e,i)}else{D(n,e)}return n}function Fe(e,t){var i=this;var n=i.name;var a=i.tmpl;var s=i.css;var o=i.attrs;var u=i.onCreate;if(!r[n]){Ke(n,a,s,o,u);r[n].class=this.constructor}vt(e,n,t,this);if(s){ne.inject()}return this}function Ke(e,t,i,n,a){if(L(n)){a=n;if(/^[\w\-]+\s?=/.test(i)){n=i;i=""}else{n=""}}if(i){if(L(i)){a=i}else{ne.add(i)}}e=e.toLowerCase();r[e]={name:e,tmpl:t,attrs:n,fn:a};return e}function qe(e,t,i,n,a){if(i){ne.add(i,e)}r[e]={name:e,tmpl:t,attrs:n,fn:a};return e}function We(e,t,r){var i=[];function n(e){if(e.tagName){var a=W(e,s);if(t&&a!==t){a=t;Z(e,s,t)}var o=vt(e,a||e.tagName.toLowerCase(),r);if(o){i.push(o)}}else if(e.length){ue(e,n)}}ne.inject();if(A(t)){r=t;t=0}var a;var o;if(k(e)){e=e==="*"?o=bt():e+bt(e.split(/, */));a=e?$(e):[]}else{a=e}if(t==="*"){t=o||bt();if(a.tagName){a=$(t,a)}else{var u=[];ue(a,function(e){return u.push($(t,e))});a=u}t=0}n(a);return i}var Ze={};var Qe=Ze[i]={};var Ge=0;function Je(e,t,r){if(A(e)){Je("__unnamed_"+Ge++,e,true);return}var i=r?Qe:Ze;if(!t){if(M(i[e])){throw new Error("Unregistered mixin: "+e)}return i[e]}i[e]=L(t)?pe(t.prototype,i[e]||{})&&t:pe(i[e]||{},t)}function Xe(){return ue(t,function(e){return e.update()})}function Ye(e){delete r[e]}var et="WIP";var tt=Object.freeze({Tag:Fe,tag:Ke,tag2:qe,mount:We,mixin:Je,update:Xe,unregister:Ye,version:et});var rt=0;function it(e,t,r,i,a){if(e&&r){return}var s=!r&&e?this:t||this;ue(a,function(e){if(e.expr){_e.call(s,[e.expr])}i[le(e.name).replace(n,"")]=e.expr?e.expr.value:e.value})}function nt(e,r,a){if(e===void 0)e={};if(r===void 0)r={};var o=pe({},r.opts),u=r.parent,f=r.isLoop,l=!!r.isAnonymous,c=ve.skipAnonymousTags&&l,p=ht(r.item),d=r.index,v=[],g=[],m=[],y=r.root,b=r.tagName||ct(y),x=b==="virtual",_=[],w;if(!c){oe(this)}if(e.name&&y._tag){y._tag.unmount(true)}this.isMounted=false;he(this,"__",{isAnonymous:l,instAttrs:v,innerHTML:a,tagName:b,index:d,isLoop:f,listeners:[],virts:[],tail:null,head:null,parent:null,item:null});he(this,"_riot_id",++rt);he(this,"root",y);pe(this,{opts:o},p);he(this,"parent",u||null);he(this,"tags",{});he(this,"refs",{});w=f&&l?y:De(e.tmpl,a,f);he(this,"update",function e(t){var r={},i=this.isMounted&&!c;t=ht(t);pe(this,t);it.apply(this,[f,u,l,r,v]);if(i&&this.isMounted&&L(this.shouldUpdate)&&!this.shouldUpdate(t,r)){return this}if(f&&l){st.apply(this,[this.parent,_])}pe(o,r);if(i){this.trigger("update",t)}_e.call(this,m);if(i){this.trigger("updated")}return this}.bind(this));he(this,"mixin",function e(){var t=this;ue(arguments,function(e){var r,i;var n=[];var a=["init","__proto__"];e=k(e)?Je(e):e;if(L(e)){r=new e}else{r=e}var s=Object.getPrototypeOf(r);do{n=n.concat(Object.getOwnPropertyNames(i||r))}while(i=Object.getPrototypeOf(i||r));ue(n,function(e){if(!fe(a,e)){var i=Object.getOwnPropertyDescriptor(r,e)||Object.getOwnPropertyDescriptor(s,e);var n=i&&(i.get||i.set);if(!t.hasOwnProperty(e)&&n){Object.defineProperty(t,e,i)}else{t[e]=L(r[e])?r[e].bind(t):r[e]}}});if(r.init){r.init.bind(t)()}});return this}.bind(this));he(this,"mount",function t(){var r=this;y._tag=this;Se.apply(u,[y,y.attributes,function(e,t){if(!l&&Ne.isPrototypeOf(t)){t.tag=r}e.expr=t;v.push(e)}]);g=[];G(e.attrs,function(e,t){g.push({name:e,value:t})});Se.apply(this,[y,g,function(e,t){if(t){m.push(t)}else{Z(y,e.name,e.value)}}]);it.apply(this,[f,u,l,o,v]);var n=Je(i);if(n&&!c){for(var a in n){if(n.hasOwnProperty(a)){r.mixin(n[a])}}}if(e.fn){e.fn.call(this,o)}if(!c){this.trigger("before-mount")}ke.apply(this,[w,m,l]);this.update(p);if(!l){while(w.firstChild){y.appendChild(w.firstChild)}}he(this,"root",y);he(this,"isMounted",true);if(c){return}if(!this.parent){this.trigger("mount")}else{var s=ft(this.parent);s.one(!s.isMounted?"mount":"updated",function(){r.trigger("mount")})}return this}.bind(this));he(this,"unmount",function r(i){var a=this;var o=this.root,f=o.parentNode,l,p=t.indexOf(this);if(!c){this.trigger("before-unmount")}G(e.attrs,function(e){if(ce(e,n)){e=e.slice(n.length)}K(y,e)});this.__.listeners.forEach(function(e){Object.keys(e[h]).forEach(function(t){e.removeEventListener(t,e[h][t])})});if(p!==-1){t.splice(p,1)}if(f||x){if(u){l=ft(u);if(x){Object.keys(this.tags).forEach(function(e){dt(l.tags,e,a.tags[e])})}else{dt(l.tags,b,this);if(u!==l){dt(u.tags,b,this)}}}else{D(o,"")}if(f&&!i){f.removeChild(o)}K(o,s)}if(this.__.virts){ue(this.__.virts,function(e){if(e.parentNode){e.parentNode.removeChild(e)}})}lt(m);ue(v,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()});if(this.__.onUnmount){this.__.onUnmount()}if(!c){this.trigger("unmount");this.off("*")}he(this,"isMounted",false);delete this.root._tag;return this}.bind(this))}function at(e){return e.tagName&&r[W(e,s)||W(e,s)||e.tagName.toLowerCase()]}function st(e,t){var r=this;ue(Object.keys(e),function(i){var n=!P(i)&&fe(t,i);if(M(r[i])||n){if(!n){t.push(i)}r[i]=e[i]}})}function ot(e,t){var r=this.parent,i;if(!r){return}i=r.tags[e];if(R(i)){i.splice(t,0,i.splice(i.indexOf(this),1)[0])}else{pt(r.tags,e,this)}}function ut(e,t,r,i){var n=new nt(e,t,r),a=t.tagName||ct(t.root,true),s=ft(i);he(n,"parent",s);n.__.parent=i;pt(s.tags,a,n);if(s!==i){pt(i.tags,a,n)}t.root.innerHTML="";return n}function ft(e){var t=e;while(t.__.isAnonymous){if(!t.parent){break}t=t.parent}return t}function lt(e){ue(e,function(e){if(e instanceof nt){e.unmount(true)}else if(e.tagName){e.tag.unmount(true)}else if(e.unmount){e.unmount()}})}function ct(e,t){var r=at(e),i=!t&&W(e,s);return i&&!se.hasExpr(i)?i:r?r.name:e.tagName.toLowerCase()}function ht(e){if(!(e instanceof nt)&&!(e&&L(e.trigger))){return e}var t={};for(var r in e){if(!N.test(r)){t[r]=e[r]}}return t}function pt(e,t,r,i,n){var a=e[t];var s=R(a);var o=!M(n);if(a&&a===r){return}if(!a&&i){e[t]=[r]}else if(!a){e[t]=r}else{if(s){var u=a.indexOf(r);if(u===n){return}if(u!==-1){a.splice(u,1)}if(o){a.splice(n,0,r)}else{a.push(r)}}else{e[t]=[a,r]}}}function dt(e,t,r,i){if(R(e[t])){var n=e[t].indexOf(r);if(n!==-1){e[t].splice(n,1)}if(!e[t].length){delete e[t]}else if(e[t].length===1&&!i){e[t]=e[t][0]}}else{delete e[t]}}function vt(e,i,n,a){var s=r[i],o=r[i].class,u=a||(o?Object.create(o.prototype):{}),f=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";var l=pe({root:e,opts:n},{parent:n?n.parent:null});if(s&&e){nt.apply(u,[s,l,f])}if(u&&u.mount){u.mount(true);if(!fe(t,u)){t.push(u)}}return u}function gt(e,t){var r=B();mt.call(e,r);t.parentNode.replaceChild(r,t)}function mt(e,t){var r=this;var i=U(),n=U(),a=B(),s,o;this.root.insertBefore(i,this.root.firstChild);this.root.appendChild(n);this.__.head=o=i;this.__.tail=n;while(o){s=o.nextSibling;a.appendChild(o);r.__.virts.push(o);o=s}if(t){e.insertBefore(a,t.__.head)}else{e.appendChild(a)}}function yt(e,t){var r=this;var i=this.__.head,n=B(),a;while(i){a=i.nextSibling;n.appendChild(i);i=a;if(i===r.__.tail){n.appendChild(i);e.insertBefore(n,t.__.head);break}}}function bt(e){if(!e){var t=Object.keys(r);return t+bt(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var r=t.trim().toLowerCase();return e+",["+s+'="'+r+'"]'},"")}var xt=Object.freeze({getTag:at,inheritFrom:st,moveChildTag:ot,initChildTag:ut,getImmediateCustomParentTag:ft,unmountAll:lt,getTagName:ct,cleanUpData:ht,arrayishAdd:pt,arrayishRemove:dt,mountTo:vt,makeReplaceVirtual:gt,makeVirtual:mt,moveVirtual:yt,selectTags:bt});var _t=ve;var wt={tmpl:se,brackets:ae,styleManager:ne,vdom:t,styleNode:ne.styleNode,dom:X,check:H,misc:de,tags:xt};var Nt=pe({},tt,{observable:oe,settings:_t,util:wt});var Ot=function(){if(!jt.debug){return}var e=Array.prototype.slice.call(arguments);e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var jt={debug:false,default:"@"};var Ct=function e(t){this.name=t.name;if(!this.name){this.name=jt.default;Ot("Default store name. name="+this.name)}this.state=t.state?Object.assign({},t.state):{};this.actions=t.actions?t.actions:{};this.mutations=t.mutations?t.mutations:{};this.getters=t.getters?t.getters:{};Nt.observable(this)};Ct.prototype.commit=function e(t,r){var i=Object.assign({},this.state);this.mutations[t].apply(this,[i,r]);Object.assign(this.state,i)};Ct.prototype.action=function e(){var t=this;var r=[].slice.call(arguments);var i=r.shift();r.push(function(e,r){var n=Object.assign(t.state,r);Ot("[trigger]",i,n);t.trigger(i,null,n,t)});this.actions[i].apply(this,r)};var Tt=function t(){this.version=e||"";this.settings=jt;this.Store=Ct;this.stores={};var r=this;Nt.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*")});if(e.debug){this.on("*",function(e){console.log("events.*",e)})}},riotx:r})};Tt.prototype.add=function e(t){if(this.stores[t.name]){var r=new Error("The store has been overwritten. name="+t.name);throw r}this.stores[t.name]=t;return this};Tt.prototype.get=function e(t){t=t?t:jt.default;return this.stores[t]};var Et=new Tt;return Et});