var riotx=function(u,r){"use strict";var e="2.0.2";u=u&&u.hasOwnProperty("default")?u["default"]:u;r=r&&r.hasOwnProperty("default")?r["default"]:r;function t(t,e,n){if(t==null){return}var r=-1,i=t.length;while(++r<i){if(e.call(n,t[r],r,t)===false){break}}}var s=t;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var c=n;var f,l;function h(){l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];f=true;for(var t in{toString:null}){f=false}}function i(t,e,n){var r,i=0;if(f==null){h()}for(r in t){if(p(e,t,r,n)===false){break}}if(f){var o=t.constructor,a=!!o&&t===o.prototype;while(r=l[i++]){if((r!=="constructor"||!a&&c(t,r))&&t[r]!==Object.prototype[r]){if(p(e,t,r,n)===false){break}}}}}function p(t,e,n,r){return t.call(r,e[n],n,e)}var o=i;function a(n,r,i){o(n,function(t,e){if(c(n,e)){return r.call(i,n[e],e,n)}})}var d=a;var v=Object.keys||function(t){var n=[];d(t,function(t,e){n.push(e)});return n};var g=v;function y(t){return Object.prototype.toString.call(t).slice(8,-1)}var m=y;function _(t,e){return m(t)===e}var w=_;function b(t){return w(t,"Function")}var j=b;function x(t){return w(t,"Object")}var O=x;var T=setTimeout;function P(){}function F(t,e){return function(){t.apply(e,arguments)}}function E(t){if(!(this instanceof E)){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];D(t,this)}function R(n,r){while(n._state===3){n=n._value}if(n._state===0){n._deferreds.push(r);return}n._handled=true;E._immediateFn(function(){var t=n._state===1?r.onFulfilled:r.onRejected;if(t===null){(n._state===1?N:B)(r.promise,n._value);return}var e;try{e=t(n._value)}catch(t){B(r.promise,t);return}N(r.promise,e)})}function N(e,t){try{if(t===e){throw new TypeError("A promise cannot be resolved with itself.")}if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(t instanceof E){e._state=3;e._value=t;S(e);return}else if(typeof n==="function"){D(F(n,t),e);return}}e._state=1;e._value=t;S(e)}catch(t){B(e,t)}}function B(t,e){t._state=2;t._value=e;S(t)}function S(t){if(t._state===2&&t._deferreds.length===0){E._immediateFn(function(){if(!t._handled){E._unhandledRejectionFn(t._value)}})}for(var e=0,n=t._deferreds.length;e<n;e++){R(t,t._deferreds[e])}t._deferreds=null}function k(t,e,n){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=n}function D(t,e){var n=false;try{t(function(t){if(n){return}n=true;N(e,t)},function(t){if(n){return}n=true;B(e,t)})}catch(t){if(n){return}n=true;B(e,t)}}E.prototype["catch"]=function(t){return this.then(null,t)};E.prototype.then=function(t,e){var n=new this.constructor(P);R(this,new k(t,e,n));return n};E.prototype["finally"]=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})};E.all=function(e){return new E(function(r,i){if(!e||typeof e.length==="undefined"){throw new TypeError("Promise.all accepts an array")}var o=Array.prototype.slice.call(e);if(o.length===0){return r([])}var a=o.length;function u(e,t){try{if(t&&(typeof t==="object"||typeof t==="function")){var n=t.then;if(typeof n==="function"){n.call(t,function(t){u(e,t)},i);return}}o[e]=t;if(--a===0){r(o)}}catch(t){i(t)}}for(var t=0;t<o.length;t++){u(t,o[t])}})};E.resolve=function(e){if(e&&typeof e==="object"&&e.constructor===E){return e}return new E(function(t){t(e)})};E.reject=function(n){return new E(function(t,e){e(n)})};E.race=function(i){return new E(function(t,e){for(var n=0,r=i.length;n<r;n++){i[n].then(t,e)}})};E._immediateFn=typeof setImmediate==="function"&&function(t){setImmediate(t)}||function(t){T(t,0)};E._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var A=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var I={debug:false,default:"@",changeBindName:"riotxChange",strict:false,logger:{output:A}};var C=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(!I.debug){return}t.unshift("DEBUG");I.logger.output.apply(null,t)};var U=function(t){var e=new Error("[riotx] "+t);I.logger.output.apply(null,["ERROR",e]);throw e};var z=function t(e){var n=this;this.name=e.name;if(!this.name){this.name=I.default;C("Default store name. name="+this.name)}this._state=e.state;Object.defineProperty(this,"state",{get:function(){if(I.strict){U("[strict] Direct access get error.")}return n._state},set:function(t){if(I.strict){U("[strict] Direct access set error. "+t)}n._state=t}});this._actions=e.actions;this._mutations=e.mutations;this._getters=e.getters;this._plugins=e.plugins;r.observable(this);s(this._plugins,function(t){if(!j(t)||!u(t)){U("[plugin] The plugin is not a function.")}t.apply(null,[n])})};z.prototype.reset=function t(){this.name=null;this._state=null;this._actions=null;this._mutations=null;this._getters=null;this._plugins=null;this.off("*")};z.prototype.getter=function t(e,n){if(n&&!O(n)){U("[getter]', 'The getter data is not object type. name="+e+" data="+n)}var r={state:this._state};var i=this._getters[e];if(!i||!j(i)||!u(i)){U("[getter]', 'The getter is not a function. name="+e+" data="+n)}C("[getter]",e,n);return i.apply(null,[r,n])};z.prototype.commit=function t(e,n){var r=this;if(n&&!O(n)){U("[mutation]', 'The mutation data is not object type. name="+e+" data="+n)}var i={getter:function(t,e){return r.getter.apply(r,[t,e])},state:this._state};var o=this._mutations[e];if(!o||!j(o)||!u(o)){U("[mutation]', 'The mutation is not a function. name="+e+" data="+n)}C("[mutation(before)]",e,this._state,n);var a=o.apply(null,[i,n]);C("[mutation(after)]",e,this._state,n);this.trigger("riotx:mutations:after",e,a,i,n);s(a,function(t){r.trigger(t,r._state,r)})};z.prototype.action=function t(e,n){var r=this;if(n&&!O(n)){U("[action]', 'The action data is not object type. name="+e+" data="+n)}var i={getter:function(t,e){return r.getter.apply(r,[t,e])},commit:function(t,e){r.commit(t,e)}};var o=this._actions[e];if(!o||!j(o)||!u(o)){U("[action] The action is not a function. name="+e+" data="+n)}C("[action]",e,n);return E.resolve().then(function(){return o.apply(null,[i,n])})};z.prototype.change=function t(){var e;var n=[],r=arguments.length;while(r--)n[r]=arguments[r];(e=this).on.apply(e,n)};var G=function t(){this.version=e||"";this.Store=z;this.stores={};var n=function(t,e,n){var r=[],i=arguments.length-3;while(i-- >0)r[i]=arguments[i+3];this._riotx_change_handlers.push({store:t,evtName:e,handler:n});r.unshift(n);r.unshift(e);t.change.apply(t,r)};r.mixin({init:function(){var e=this;this.on("unmount",function(){e.off("*");s(e._riotx_change_handlers,function(t){t.store.off(t.evtName,t.handler)});delete e.riotx;delete e._riotx_change_handlers;delete e[I.changeBindName]});if(I.debug){this.on("*",function(t){C("[riot.mixin]",t,e)})}this._riotx_change_handlers=[];this[I.changeBindName]=n},riotx:this})};G.prototype.add=function t(e){if(this.stores[e.name]){U("[store.add] The store instance named `"+e.name+"` already exists.")}this.stores[e.name]=e;return this};G.prototype.get=function t(e){if(e===void 0)e=I.default;return this.stores[e]};G.prototype.debug=function t(e){I.debug=!!e;return this};G.prototype.setChangeBindName=function t(e){I.changeBindName=e;return this};G.prototype.strict=function t(e){I.strict=!!e;return this};G.prototype.logger=function t(e){I.logger.output=e;return this};G.prototype.reset=function t(){d(this.stores||{},function(t){t.reset()});this.stores={};return this};G.prototype.size=function t(){return g(this.stores).length};var L=new G;return L}(isAsyncFunction,riot);