var riotx=function(t){"use strict";var e="2.0.0";t=t&&t.hasOwnProperty("default")?t["default"]:t;function n(t,e,n){if(t==null){return}var r=-1,i=t.length;while(++r<i){if(e.call(n,t[r],r,t)===false){break}}}var r=n;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var o=i;var a;var u;function s(){u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];a=true;for(var t in{toString:null}){a=false}}function c(t,e,n){var r,i=0;if(a==null){s()}for(r in t){if(f(e,t,r,n)===false){break}}if(a){var c=t.constructor,l=!!c&&t===c.prototype;while(r=u[i++]){if((r!=="constructor"||!l&&o(t,r))&&t[r]!==Object.prototype[r]){if(f(e,t,r,n)===false){break}}}}}function f(t,e,n,r){return t.call(r,e[n],n,e)}var l=c;function h(t,e,n){l(t,function(r,i){if(o(t,i)){return e.call(n,t[i],i,t)}})}var p=h;var d=Object.keys||function(t){var e=[];p(t,function(t,n){e.push(n)});return e};var v=d;function g(t){return Object.prototype.toString.call(t).slice(8,-1)}var y=g;function m(t,e){return y(t)===e}var _=m;function w(t){return _(t,"Function")}var b=w;function j(t){return _(t,"Object")}var x=j;var T=setTimeout;function O(){}function P(t,e){return function(){t.apply(e,arguments)}}function E(t){if(!(this instanceof E)){throw new TypeError("Promises must be constructed via new")}if(typeof t!=="function"){throw new TypeError("not a function")}this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];k(t,this)}function F(t,e){while(t._state===3){t=t._value}if(t._state===0){t._deferreds.push(e);return}t._handled=true;E._immediateFn(function(){var n=t._state===1?e.onFulfilled:e.onRejected;if(n===null){(t._state===1?R:N)(e.promise,t._value);return}var r;try{r=n(t._value)}catch(t){N(e.promise,t);return}R(e.promise,r)})}function R(t,e){try{if(e===t){throw new TypeError("A promise cannot be resolved with itself.")}if(e&&(typeof e==="object"||typeof e==="function")){var n=e.then;if(e instanceof E){t._state=3;t._value=e;B(t);return}else if(typeof n==="function"){k(P(n,e),t);return}}t._state=1;t._value=e;B(t)}catch(e){N(t,e)}}function N(t,e){t._state=2;t._value=e;B(t)}function B(t){if(t._state===2&&t._deferreds.length===0){E._immediateFn(function(){if(!t._handled){E._unhandledRejectionFn(t._value)}})}for(var e=0,n=t._deferreds.length;e<n;e++){F(t,t._deferreds[e])}t._deferreds=null}function S(t,e,n){this.onFulfilled=typeof t==="function"?t:null;this.onRejected=typeof e==="function"?e:null;this.promise=n}function k(t,e){var n=false;try{t(function(t){if(n){return}n=true;R(e,t)},function(t){if(n){return}n=true;N(e,t)})}catch(t){if(n){return}n=true;N(e,t)}}E.prototype["catch"]=function(t){return this.then(null,t)};E.prototype.then=function(t,e){var n=new this.constructor(O);F(this,new S(t,e,n));return n};E.prototype["finally"]=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})};E.all=function(t){return new E(function(e,n){if(!t||typeof t.length==="undefined"){throw new TypeError("Promise.all accepts an array")}var r=Array.prototype.slice.call(t);if(r.length===0){return e([])}var i=r.length;function o(t,a){try{if(a&&(typeof a==="object"||typeof a==="function")){var u=a.then;if(typeof u==="function"){u.call(a,function(e){o(t,e)},n);return}}r[t]=a;if(--i===0){e(r)}}catch(t){n(t)}}for(var a=0;a<r.length;a++){o(a,r[a])}})};E.resolve=function(t){if(t&&typeof t==="object"&&t.constructor===E){return t}return new E(function(e){e(t)})};E.reject=function(t){return new E(function(e,n){n(t)})};E.race=function(t){return new E(function(e,n){for(var r=0,i=t.length;r<i;r++){t[r].then(e,n)}})};E._immediateFn=typeof setImmediate==="function"&&function(t){setImmediate(t)}||function(t){T(t,0)};E._unhandledRejectionFn=function t(e){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",e)}};var D=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];e.unshift("[riotx]");try{console.log.apply(console,e)}catch(t){console.log(e)}};var I={debug:false,default:"@",changeBindName:"riotxChange",strict:false,logger:{output:D}};var A=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];if(!I.debug){return}t.unshift("DEBUG");I.logger.output.apply(null,t)};var C=function(t){var e=new Error("[riotx] "+t);I.logger.output.apply(null,["ERROR",e]);throw e};var U=function e(n){var i=this;this.name=n.name;if(!this.name){this.name=I.default;A("Default store name. name="+this.name)}this._state=n.state;Object.defineProperty(this,"state",{get:function(){if(I.strict){C("[strict] Direct access get error.")}return i._state},set:function(t){if(I.strict){C("[strict] Direct access set error. "+t)}i._state=t}});this._actions=n.actions;this._mutations=n.mutations;this._getters=n.getters;this._plugins=n.plugins;t.observable(this);r(this._plugins,function(t){if(!b(t)){C("[plugin] The plugin is not a function.")}t.apply(null,[i])})};U.prototype.reset=function t(){this.name=null;this._state=null;this._actions=null;this._mutations=null;this._getters=null;this._plugins=null;this.off("*")};U.prototype.getter=function t(e,n){if(n&&!x(n)){C("[getter]', 'The getter data is not object type. name="+e+" data="+n)}var r={state:this._state};var i=this._getters[e];if(!i||!b(i)){C("[getter]', 'The getter is not a function. name="+e+" data="+n)}A("[getter]",e,n);return i.apply(null,[r,n])};U.prototype.commit=function t(e,n){var i=this;if(n&&!x(n)){C("[mutation]', 'The mutation data is not object type. name="+e+" data="+n)}var o={getter:function(t,e){return i.getter.apply(i,[t,e])},state:this._state};var a=this._mutations[e];if(!a||!b(a)){C("[mutation]', 'The mutation is not a function. name="+e+" data="+n)}A("[mutation(before)]",e,this._state,n);var u=a.apply(null,[o,n]);A("[mutation(after)]",e,this._state,n);this.trigger("riotx:mutations:after",e,u,o,n);r(u,function(t){i.trigger(t,i._state,i)})};U.prototype.action=function t(e,n){var r=this;if(n&&!x(n)){C("[action]', 'The action data is not object type. name="+e+" data="+n)}var i={getter:function(t,e){return r.getter.apply(r,[t,e])},commit:function(t,e){r.commit(t,e)}};var o=this._actions[e];if(!o||!b(o)){C("[action] The action is not a function. name="+e+" data="+n)}A("[action]",e,n);return E.resolve().then(function(){return o.apply(null,[i,n])})};U.prototype.change=function t(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];(r=this).on.apply(r,e);var r};var z=function n(){this.version=e||"";this.Store=U;this.stores={};var i=function(t,e,n){var r=[],i=arguments.length-3;while(i-- >0)r[i]=arguments[i+3];this._riotx_change_handlers.push({store:t,evtName:e,handler:n});r.unshift(n);r.unshift(e);t.change.apply(t,r)};t.mixin({init:function(){var t=this;this.on("unmount",function(){t.off("*");r(t._riotx_change_handlers,function(t){t.store.off(t.evtName,t.handler)});delete t.riotx;delete t._riotx_change_handlers;delete t[I.changeBindName]});if(I.debug){this.on("*",function(e){A("[riot.mixin]",e,t)})}this[I.changeBindName]=i},riotx:this,_riotx_change_handlers:[]})};z.prototype.add=function t(e){if(this.stores[e.name]){C("[store.add] The store instance named `"+e.name+"` already exists.")}this.stores[e.name]=e;return this};z.prototype.get=function t(e){if(e===void 0)e=I.default;return this.stores[e]};z.prototype.debug=function t(e){I.debug=!!e;return this};z.prototype.setChangeBindName=function t(e){I.changeBindName=e;return this};z.prototype.strict=function t(e){I.strict=!!e;return this};z.prototype.logger=function t(e){I.logger.output=e;return this};z.prototype.reset=function t(){p(this.stores||{},function(t){t.reset()});this.stores={};return this};z.prototype.size=function t(){return v(this.stores).length};var G=new z;return G}(riot);